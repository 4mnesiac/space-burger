{"version":3,"sources":["components/burger-constructor/parts/ingredients-list/ingredients-list.module.css","components/loader/loader.module.css","components/burger-ingredients/parts/menu/menu.module.css","components/burger-ingredients/parts/tabs/tabs.module.css","pages/home-page/home.module.css","components/ingredient-details/parts/nutrition-list/nutrition-list.module.css","pages/profile/profile.module.css","pages/profile-orders/profile-orders.module.css","components/app-header/app-header.module.css","components/order-item-details/order-item-details.module.css","components/order-dashboard/order-dashboard.module.css","pages/register/register.module.css","components/profile-nav/profile-nav.module.css","components/feed-card/feed-card.module.css","utils/cookie.ts","services/api.ts","images/order-done.svg","services/slices/authSlice.ts","services/hooks.ts","components/input/input.tsx","pages/auth/auth.tsx","services/slices/passwordSlice.ts","pages/forgot-password/forgot-password.tsx","services/slices/cartSlice.ts","components/burger-constructor/parts/ingredient/ingredient.tsx","components/burger-constructor/parts/ingredients-list/ingredients-list.tsx","components/loader/loader.tsx","components/order-details/order-details.tsx","components/modal/parts/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","services/slices/orderSlice.ts","services/slices/modalSlice.ts","components/burger-constructor/parts/order/order.tsx","components/burger-constructor/parts/bun/bun.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredients/parts/card/card.tsx","components/burger-ingredients/parts/menu-item/menu-item.tsx","components/burger-ingredients/parts/menu/menu.tsx","components/burger-ingredients/parts/tabs/tabs.tsx","services/slices/ingredientsSlice.ts","components/burger-ingredients/burger-ingredients.tsx","pages/home-page/home-page.tsx","components/ingredient-details/parts/nutrition-item/nutrition-item.tsx","components/ingredient-details/parts/nutrition-list/nutrition-list.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredient/ingredient-page.tsx","pages/not-found-404/not-found-404.tsx","components/profile-nav/profile-nav.tsx","components/profile-form/profile-form.tsx","pages/profile/profile.tsx","components/price/price.tsx","utils/formatDate.ts","utils/formatData.ts","utils/calculatePrice.ts","utils/constants.ts","components/feed-card/feed-card.tsx","components/scroll-container/scroll-container.tsx","components/order-preview/order-preview.tsx","services/slices/feedSlice.ts","services/web-socket/wsActions/ws-feed-actions.ts","services/slices/userFeedSlice.ts","services/web-socket/wsActions/index.ts","services/web-socket/wsActions/ws-user-feed-actions.ts","services/web-socket/wsActions/ws-connect-actions.ts","pages/profile-orders/profile-orders.tsx","pages/register/register.tsx","pages/reset-password/reset-password.tsx","components/app-header/parts/nav-item/nav-item.tsx","components/app-header/parts/navbar/navbar.tsx","components/app-header/app-header.tsx","components/protected-reset-password/protected-reset-password.tsx","components/protected-route/protected-route.tsx","components/order-dashboard/order-dashboard.tsx","components/feed/feed.tsx","components/order-info/parts/order-title/order-title.tsx","components/order-info/parts/order-item/order-item.tsx","components/order-info/parts/order-footer/order-footer.tsx","components/order-info/parts/order-content/order-content.tsx","components/order-info/order-info.tsx","components/protected-authorized-route/protected-authorized-route.tsx","components/order-item-details/order-item-details.tsx","components/app/app.tsx","services/slices/index.ts","services/web-socket/wsServices/wsServices.ts","services/web-socket/middleware/feed-socket-middleware.ts","services/store.ts","index.tsx","pages/auth/auth.module.css","pages/reset-password/reset-password.module.css","components/order-details/order-details.module.css","components/burger-ingredients/parts/card/card.module.css","components/app-header/parts/navbar/navbar.module.css","components/modal/modal.module.css","components/order-info/parts/order-item/order-item.module.css","components/ingredient-details/ingredient-details.module.css","pages/not-found-404/not-found-404.module.css","components/app-header/parts/nav-item/nav-item.module.css","components/feed/feed.module.css","components/modal/parts/modal-overlay/modal-overlay.module.css","components/ingredient-details/parts/nutrition-item/nutrition-item.module.css","components/price/price.module.css","components/order-info/parts/order-title/order-title.module.css","components/order-info/parts/order-footer/order-footer.module.css","components/order-info/parts/order-content/order-content.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-constructor/parts/ingredient/ingredient.module.css","components/burger-constructor/parts/order/order.module.css","components/burger-constructor/parts/bun/bun.module.css","components/burger-ingredients/burger-ingredients.module.css","components/burger-ingredients/parts/menu-item/menu-item.module.css","pages/ingredient/ingredient-page.module.css","components/profile-form/profile-form.module.css","components/order-preview/order-preview.module.css","components/scroll-container/scroll-container.module.css","components/order-info/order-info.module.css"],"names":["module","exports","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","_path","_path2","_path3","_path4","_defs","checkResponse","res","ok","json","then","err","Promise","reject","refreshExpiredTokenApi","func","a","args","refreshToken","localStorage","getItem","fetch","API","method","headers","body","JSON","stringify","token","response","success","accessToken","path","setItem","console","log","Error","message","getUserApi","authorization","logoutRequestApi","updateUserApi","email","password","loginRequestApi","form","registerRequestApi","forgotPasswordApi","resetPasswordApi","getAllOrdersApi","getUserOrdersApi","sendOrderApi","ids","mode","ingredients","getOrderByIdApi","id","login","createAsyncThunk","user","logout","removeItem","register","updateUser","getUser","initialState","isAuthorized","isLoading","hasError","authSlice","createSlice","reducers","extraReducers","builder","addCase","pending","state","rejected","fulfilled","action","payload","useAppParams","useParams","useAppDispatch","useDispatch","useAppSelector","useSelector","CustomInput","icon","type","placeholder","onChange","disabled","React","useState","isDisabled","setDisabled","onBlur","onIconClick","AuthPage","setForm","store","auth","location","useLocation","dispatch","e","target","to","from","className","styles","wrapper","onSubmit","preventDefault","heading","button","text","link","forgotPassword","resetPassword","passwordSlice","errorMessage","error","ForgotPassword","setEmail","hasConfirmation","pathname","sortedCart","bun","fillers","counts","total","cartSlice","addIngredient","item","_id","bunId","newFillers","constructorId","nanoid","deleteIngredient","itemIndex","splice","resetCart","moveIngredient","dragIndex","dropIndex","countTotal","price","reduce","acc","p","actions","Ingredient","index","ref","useRef","useDrop","accept","collect","monitor","handlerId","getHandlerId","isOver","hover","current","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","drop","useDrag","isDragging","opacity","drag","ingredientStyles","list_item","style","item_container","thumbnail","image","handleClose","IngredientsList","cart","ingredientsListStyles","main_container","map","el","_excluded","_extends","Object","assign","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgOrderDone","_ref","svgRef","title","titleId","width","height","viewBox","fill","xmlns","fillRule","clipRule","fillOpacity","cx","cy","r","gradientUnits","gradientTransform","stopColor","stopOpacity","offset","ForwardRef","LoaderSpinner","s","overlay","color","OrderDetails","order","orderDetailsStyles","order_number","number","subtitle","text_secondary","ModalOverlay","isOpen","onClick","useEffect","handleOverlayClick","window","addEventListener","removeEventListener","overlayStyles","overlay_opened","modalRoot","getElementById","Modal","onClose","children","titleType","modal","handleEsc","event","keyCode","ReactDOM","createPortal","modalStyles","container","heading_type_id","close","setOrder","getOrders","getUserOrders","getOrderById","orderSlice","allOrders","userOrders","orderToShow","totalToday","clearOrder","setOrderToShow","resetOrderToShow","orders","modalSlice","isDetailsModalOpen","isOrderModalOpen","openDetailsModal","closeDetailsModal","openOrderModal","closeOrderModal","Order","history","useHistory","idArray","useMemo","orderItems","push","orderStyles","Bun","position","isEmpty","setIsEmpty","positionText","bunStyles","bun_empty","isLocked","BurgerConstructor","isHover","dropRef","border","scroller","Card","isDrag","dragRef","cardStyles","pushLocation","card","count","picture","media","srcSet","image_mobile","image_large","src","alt","MenuItem","memo","refs","data","items","Menu","setCurrent","useInView","threshold","bunRef","inViewBun","sauceRef","inViewSauce","mainRef","inViewMain","menuStyles","filter","ingredient","tabs","Tabs","tabStyles","tab_container","active","getIngredients","ingredientsSlice","ingredientToShow","setIngredientToShow","resetIngredientToShow","BurgerIngredients","ingredientsStyles","HomePage","DndProvider","backend","HTML5Backend","NutritionItem","nutritionStyles","nutrition_item","NutritionList","calories","proteins","fat","carbohydrates","nutritionListStyles","nutrition","IngredientDetails","activeIngredient","activeIngredientFromStore","find","detailsModalStyles","detail","IngredientPage","NotFound404","ProfileNav","navmenu","menu","menu_item","exact","activeClassName","ProfileForm","isEdited","setEdited","useCallback","onCancel","user_info","size","Profile","Price","iconType","default","medium","formatOrderDate","date","diff","today","createdOn","setHours","result","getDiff","time","toLocaleString","hour","minute","timeZoneName","formatTime","calculatePrice","prevValue","ORDER_STATUS","done","created","cancel","renderIngredientsPreviews","previews","zIndex","others","preview","FeedCard","ingredientList","createdAt","status","url","useRouteMatch","formattedIngredients","arr","element","ingr","formatData","header","content","ScrollContainer","maxHeight","OrderPreview","fullscreen","order_list","reverse","feedSlice","wsConnected","wsConnectionSuccess","wsConnectionError","wsConnectionClosed","wsGetMessage","wsFeedActions","onOpen","onError","onMessage","userFeedSlice","wsActions","feed","userFeed","connect","wsConnectionInit","createAction","wsConnectionClose","ProfileOrders","RegisterPage","isVisible","setVisible","ResetPassword","setError","NavItem","navItemStyles","NavBar","navbarStyles","navbar","nav_menu","item_wrapper","logo","AppHeader","headerStyles","ProtectedRouteWithReset","rest","emailConfirmationSended","render","ProtectedRoute","OrderDashboard","readyOrders","slice","inProgressOrders","dashboard","content_item","row__title","list","ready","inprogress","row","row__content","FeedPage","OrderTitle","OrderItem","ingredient_name","OrderFooter","datetime","footer","dateTime","OrderContent","ingredients_title","OrderInfo","orderIngredients","orderPrice","catch","ProtectedAuthorizedRoute","OrderItemDetails","App","closeModal","goBack","rootReducer","ingredientsReducer","orderReducer","cartReducer","modalReducer","authReducer","passwordReducer","feedReducer","userFeedReducer","wsServices","WebSocket","split","socketMiddleware","socket","socketName","next","toString","onopen","onmessage","parsedData","parse","restParsedData","onerror","onclose","configureStore","reducer","middleware","getDefaultMiddleware","concat","devTools","StrictMode","basename"],"mappings":"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","file":"static/js/main.1a7c210b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_container\":\"ingredients-list_main_container__1YZA9 pl-4 pr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"loader_overlay__1vWAi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroller\":\"menu_scroller__3mPM4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab_container\":\"tabs_tab_container__11qQl mb-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"home_wrapper__1MXcy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nutrition\":\"nutrition-list_nutrition__1tfzN mb-15\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"profile_wrapper__z1dCt pt-30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"profile-orders_wrapper__3ovSw pt-30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1gLfD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-item-details_card__2m0v6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"order-dashboard_dashboard__rbmci ml-15 pr-2 pt-25\",\"content\":\"order-dashboard_content__2IFIg mb-15\",\"content_item\":\"order-dashboard_content_item__1alGy pr-9\",\"list\":\"order-dashboard_list__2Yt0N text text_type_digits-default mt-6\",\"title\":\"order-dashboard_title__2i11l pb-6\",\"row\":\"order-dashboard_row__3YZB2 mb-15\",\"row__title\":\"order-dashboard_row__title__23Tk1 text text_type_main-medium\",\"row__content\":\"order-dashboard_row__content__3l0r_ text text_type_digits-large\",\"ready\":\"order-dashboard_ready__3iwqF\",\"inprogress\":\"order-dashboard_inprogress__1CSOf mt-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"register_wrapper__3tb37\",\"form\":\"register_form__2WYQF mb-20\",\"heading\":\"register_heading__rfXfv mb-6\",\"button\":\"register_button__3GYdV\",\"text\":\"register_text__2bf0X text text_type_main-default mb-4\",\"link\":\"register_link__t2YSS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navmenu\":\"profile-nav_navmenu__3r1Ye mr-15\",\"user_info\":\"profile-nav_user_info__1v50h ml-15\",\"menu\":\"profile-nav_menu__36Kkf text text_type_main-medium mb-20\",\"link\":\"profile-nav_link__30Dbl\",\"active\":\"profile-nav_active__zWfpN\",\"menu_item\":\"profile-nav_menu_item__3F96_\",\"text\":\"profile-nav_text__32Bzr text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"feed-card_card__5XmzV mt-4 p-6\",\"header\":\"feed-card_header__1STaG mb-6\",\"id\":\"feed-card_id__11HbA text_type_digits-default\",\"time\":\"feed-card_time__6j1XN text_type_main-default\",\"title\":\"feed-card_title__OoJuw text_type_main-medium text mb-2\",\"status\":\"feed-card_status__39hIC text text_type_main-default mb-6\",\"content\":\"feed-card_content__2abn-\",\"ingredients\":\"feed-card_ingredients__1X91f list-reset\",\"price\":\"feed-card_price__WPVZM text text_type_digits-default\",\"others\":\"feed-card_others__4hqmG text_type_main-default\",\"preview\":\"feed-card_preview__oIP-X\",\"image\":\"feed-card_image__3kSUX\",\"link\":\"feed-card_link__1ue-2\"};","export function getCookie(name: string): string {\r\n    const matches = document.cookie.match(\r\n      // eslint-disable-next-line no-useless-escape\r\n      new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n    );\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n  }\r\n  \r\n  export function setCookie(name: string, value: string | number | boolean | null, props?: {expires?: Date | string | number, path?: string}): void {\r\n    props = props || {};\r\n    let exp = props.expires;\r\n    if (typeof exp == 'number' && exp) {\r\n      const d = new Date();\r\n      d.setTime(d.getTime() + exp * 1000);\r\n      exp = props.expires = d;\r\n    }\r\n    if (exp && (exp as Date).toUTCString) {\r\n      props.expires = (exp as Date).toUTCString();\r\n    }\r\n    value = encodeURIComponent(value);\r\n    let updatedCookie = name + '=' + value;\r\n    for (const propName in props) {\r\n      updatedCookie += '; ' + propName;\r\n      const propValue = props[propName];\r\n      if (propValue !== true) {\r\n        updatedCookie += '=' + propValue;\r\n      }\r\n    }\r\n    document.cookie = updatedCookie;\r\n  }\r\n  \r\n  export function deleteCookie(name: string): void {\r\n    setCookie(name, null, { expires: -1, path: '/' });\r\n  }","import { API } from 'components/app/app'\r\nimport { setCookie, getCookie } from 'utils/cookie'\r\nimport { TUser } from '../types/types'\r\n//utility\r\n\r\nconst checkResponse = (res: Response) => {\r\n  return res.ok ? res.json() : res.json().then((err) => Promise.reject(err))\r\n}\r\n\r\ntype TAllowableArgs = \r\n | string\r\n | string[]\r\n | TUser\r\n\r\nexport const refreshExpiredTokenApi = async (func?: Function, args: TAllowableArgs = null) => {\r\n  const refreshToken = localStorage.getItem('token');\r\n  try {\r\n    const response = await fetch(`${API}/auth/token`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        token: refreshToken,\r\n      }),\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      if (res.refreshToken !== refreshToken) {\r\n        setCookie('token', res.accessToken, {path: '/'})\r\n        localStorage.setItem('token', res.refreshToken)\r\n        console.log('refresh success!')\r\n        if (func) {\r\n          return await func(args)\r\n        }\r\n      }\r\n      return res;\r\n    } \r\n    throw new Error(res.message)\r\n  } catch (error) {\r\n    console.log('Refresh error: ' + error.message)\r\n  }\r\n}\r\n\r\nexport const getUserApi = async () => {\r\n  try {\r\n    const response = await fetch(`${API}/auth/user`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: getCookie('token'),\r\n      },\r\n    })\r\n    return await checkResponse(response)\r\n  } catch (err) {\r\n    return await Promise.reject(err)\r\n  }\r\n}\r\n\r\nexport const logoutRequestApi = async () => {\r\n  try {\r\n    const response = await fetch(`${API}/auth/logout`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        token: localStorage.getItem('token'),\r\n      }),\r\n    })\r\n    return await checkResponse(response)\r\n  } catch (error) {\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nexport const updateUserApi = async ({ name, email, password }: TUser) => {\r\n  try {\r\n    const response = await fetch(`${API}/auth/user`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: getCookie('token'),\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        email,\r\n        password,\r\n      }),\r\n    })\r\n    const res = await checkResponse(response)\r\n    return res\r\n  } catch (error) {\r\n    console.log('Update user failed: ', error)\r\n    return Promise.reject(error)\r\n  }\r\n}\r\n\r\nexport const loginRequestApi = async (form: TUser) => {\r\n  try {\r\n    const response = await fetch(`${API}/auth/login`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(form),\r\n    })\r\n    return await checkResponse(response)\r\n  } catch (error) {\r\n    console.log(error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const registerRequestApi = async (form: TUser) => {\r\n  try {\r\n    const response = await fetch(`${API}/auth/register`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(form),\r\n    })\r\n    const res = await checkResponse(response)\r\n    return res\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const forgotPasswordApi = async (email: string) => {\r\n  try {\r\n    let response = await fetch(`${API}/password-reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        email,\r\n      }),\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const resetPasswordApi = async ({ password, token }: TUser) => {\r\n  try {\r\n    let response = await fetch(`${API}/password-reset/reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        password,\r\n        token,\r\n      }),\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const getAllOrdersApi = async () => {\r\n  try {\r\n    let response = await fetch(`${API}/orders/all`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: getCookie('token'),\r\n      },\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const getUserOrdersApi = async () => {\r\n  try {\r\n    let response = await fetch(`${API}/orders`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: getCookie('token'),\r\n      },\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const sendOrderApi = async (ids: string[]) => {\r\n  try {\r\n    const response = await fetch(`${API}/orders`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: getCookie('token'),\r\n      },\r\n      body: JSON.stringify({\r\n        ingredients: ids,\r\n      }),\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      console.log(res)\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n\r\nexport const getOrderByIdApi = async (id: string) => {\r\n  try {\r\n    let response = await fetch(`${API}/orders/${id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n    const res = await checkResponse(response)\r\n    if (res && res.success) {\r\n      console.log(res)\r\n      return res\r\n    } else {\r\n      return Promise.reject(res.message)\r\n    }\r\n  } catch (error) {\r\n    console.log('Catched error ' + error.message)\r\n    return Promise.reject(error.message)\r\n  }\r\n}\r\n","var _path, _path2, _path3, _path4, _defs;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgOrderDone(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 107,\n    height: 102,\n    viewBox: \"0 0 107 102\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z\",\n    fill: \"url(#paint0_radial)\",\n    fillOpacity: 0.25\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z\",\n    fill: \"url(#paint1_radial)\",\n    fillOpacity: 0.25\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z\",\n    fill: \"url(#paint2_radial)\",\n    fillOpacity: 0.25\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z\",\n    fill: \"#F2F2F3\"\n  })), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint0_radial\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint1_radial\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\"\n  })), /*#__PURE__*/React.createElement(\"radialGradient\", {\n    id: \"paint2_radial\",\n    cx: 0,\n    cy: 0,\n    r: 1,\n    gradientUnits: \"userSpaceOnUse\",\n    gradientTransform: \"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#801AB3\",\n    stopOpacity: 0\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#4C4CFF\",\n    stopOpacity: 0.5\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgOrderDone);\nexport default __webpack_public_path__ + \"static/media/order-done.fb9f8534.svg\";\nexport { ForwardRef as ReactComponent };","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\r\nimport {\r\n  getUserApi,\r\n  loginRequestApi,\r\n  logoutRequestApi,\r\n  refreshExpiredTokenApi,\r\n  registerRequestApi,\r\n  updateUserApi,\r\n} from '../api'\r\nimport { setCookie } from 'utils/cookie';\r\n\r\ninterface IinitialState {\r\n  isAuthorized: boolean,\r\n  user: {\r\n    name: string,\r\n    email: string,\r\n  },\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n}\r\nexport type Tform = {\r\n  name: string,\r\n  password: string,\r\n  email: string\r\n}\r\nexport type Tlogin = Omit<Tform, 'name'> \r\n\r\nexport const login = createAsyncThunk('auth/login', async (form: Tlogin) => {\r\n  const res = await loginRequestApi(form)\r\n  if (res && res.success) {\r\n    setCookie('token', res.accessToken, {path: '/'})\r\n    localStorage.setItem('token', res.refreshToken)\r\n    localStorage.setItem('userName', res.user.name)\r\n    console.log('Login success, ' + res.user.name)\r\n    return res\r\n  } else {\r\n    return Promise.reject(res.message)\r\n  }\r\n})\r\n\r\nexport const logout = createAsyncThunk('auth/logout', async () => {\r\n  const res = await logoutRequestApi()\r\n  if (res && res.success) {\r\n    setCookie('token', '', {path: '/'})\r\n    localStorage.removeItem('token')\r\n    localStorage.removeItem('userName')\r\n    console.log('logout success')\r\n    return res;\r\n  } else {\r\n    return Promise.reject(res.message)\r\n  }\r\n})\r\n\r\nexport const register = createAsyncThunk('auth/register', async (form: Tform) => {\r\n  const res = await registerRequestApi(form)\r\n  if (res && res.success) {\r\n    console.log('register success' + res.user)\r\n    return res.user\r\n  } else {\r\n    return Promise.reject(res.message)\r\n  }\r\n})\r\n\r\nexport const updateUser = createAsyncThunk('auth/updateUser', async (form: Tform) => {\r\n  try {\r\n    const res = await updateUserApi(form)\r\n  \r\n    if (res && res.success) {\r\n      localStorage.setItem('userName', res.user.name)\r\n      console.log('update success ', res)\r\n      return res.user\r\n    }\r\n    throw new Error(res)\r\n  } catch (error) {\r\n  \r\n    if (error.message === 'jwt expired') {\r\n      return await refreshExpiredTokenApi(updateUserApi, form)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error}\"`)\r\n    return Promise.reject(error.message)\r\n  }\r\n})\r\n\r\nexport const getUser = createAsyncThunk('auth/getUser', async () => {\r\n  try {\r\n    const response = await getUserApi()\r\n    if (response && response.success) {\r\n      localStorage.setItem('userName', response.user.name)\r\n      return response\r\n    }\r\n    throw new Error(response.message)\r\n  } catch (error) {\r\n    if (error.message === 'jwt expired') {\r\n      console.log(error.message)\r\n      await refreshExpiredTokenApi(getUserApi, null)\r\n      return Promise.reject(error)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error.message}\"`)\r\n    return Promise.reject(error.message)\r\n  }\r\n})\r\n\r\nexport const initialState: IinitialState = {\r\n  isAuthorized: false,\r\n  user: {\r\n    name: '',\r\n    email: '',\r\n  },\r\n  isLoading: false,\r\n  hasError: false,\r\n}\r\n\r\nexport const authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(login.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n        state.isAuthorized = false\r\n      })\r\n      .addCase(login.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        state.isAuthorized = false\r\n        state.user = initialState.user\r\n      })\r\n      .addCase(login.fulfilled, (state, action) => {\r\n        state.user = action.payload.user\r\n        state.hasError = false\r\n        state.isAuthorized = true\r\n        state.isLoading = false\r\n      })\r\n      .addCase(register.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(register.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n      })\r\n      .addCase(register.fulfilled, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(logout.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(logout.fulfilled, (state) => {\r\n        state.isAuthorized = false\r\n        state.isLoading = false\r\n        state.hasError = false\r\n        state.user = initialState.user\r\n      })\r\n      .addCase(logout.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        state.isAuthorized = true\r\n      })\r\n      .addCase(getUser.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(getUser.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        // state.user = initialState.user\r\n      })\r\n      .addCase(getUser.fulfilled, (state, action) => {\r\n        state.user = action.payload.user\r\n        state.isAuthorized = true\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(updateUser.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(updateUser.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n      })\r\n      .addCase(updateUser.fulfilled, (state, action) => {\r\n        state.user = action.payload\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n  },\r\n})\r\n\r\nexport default authSlice.reducer\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\r\nimport type { RootState, AppDispatch } from './store'\r\nimport {useParams} from 'react-router-dom'\r\nimport React from 'react';\r\n\r\ntype TUseParams = {\r\n    id: string;\r\n  }\r\n\r\n\r\nexport const useAppParams = () => useParams<TUseParams>()\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\r\n\r\n// кастомный хук для автофокуса инпутов\r\nexport const useFocus = () => {\r\n    const htmlElRef = React.useRef(null)\r\n    const setFocus = ():void => { htmlElRef.current.focus() }\r\n\r\n    return [htmlElRef, setFocus]\r\n}","import { Input } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport React, { FC } from 'react'\r\nimport { TIcons } from 'types/types'\r\n\r\ninterface ICustomInput {\r\n  icon?: TIcons;\r\n  name?: string;\r\n  type: 'text' | 'password' | 'email';\r\n  placeholder: string;\r\n  value: string;\r\n  onChange(e: React.ChangeEvent<HTMLInputElement>): void;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst CustomInput: FC<ICustomInput> = ({ icon, name, type, placeholder, value, onChange, disabled }) => {\r\n  const [isDisabled, setDisabled] = React.useState(true)\r\n\r\n  const onBlur = () => {\r\n    setDisabled(true)\r\n  }\r\n  const onClick = () => {\r\n    setDisabled(false)\r\n  }\r\n\r\n  return (\r\n    <Input\r\n      icon={icon}\r\n      name={name}\r\n      disabled={disabled ?? isDisabled}\r\n      type={type}\r\n      placeholder={placeholder}\r\n      value={value}\r\n      onBlur={onBlur}\r\n      onIconClick={onClick}\r\n      onChange={onChange}\r\n    />\r\n  )\r\n}\r\n\r\nexport default CustomInput\r\n","import React, { FC, FormEvent } from 'react'\r\nimport styles from './auth.module.css'\r\nimport { Button, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { Link, Redirect, useLocation } from 'react-router-dom'\r\nimport { login } from 'services/slices/authSlice'\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks'\r\nimport CustomInput from 'components/input/input'\r\nimport { TLocationState } from 'types/types'\r\n\r\ntype TForm = {\r\n  email: string\r\n  password: string\r\n}\r\nconst AuthPage: FC = () => {\r\n  const [form, setForm] = React.useState<TForm>({ email: '', password: '' })\r\n  const { isAuthorized } = useAppSelector((store) => store.auth)\r\n  const location = useLocation<TLocationState>()\r\n\r\n  const dispatch = useAppDispatch()\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value })\r\n  }\r\n  const onSubmit = (e: FormEvent) => {\r\n    e.preventDefault()\r\n    if (form.email && form.password) {\r\n      dispatch(login(form))\r\n      setForm({ email: '', password: '' })\r\n    }\r\n  }\r\n  // возвращаем на предыдущую страницу, когда залогинимся\r\n  if (isAuthorized) {\r\n    return <Redirect to={location.state?.from || '/'} />\r\n  }\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h1 className={styles.heading}>Вход</h1>\r\n        <CustomInput\r\n          disabled={false}\r\n          name='email'\r\n          type='email'\r\n          value={form.email}\r\n          placeholder='E-mail'\r\n          onChange={onChange}\r\n        />\r\n        <PasswordInput name='password' value={form.password} onChange={onChange} />\r\n        <span className={styles.button}>\r\n          <Button>Войти</Button>\r\n        </span>\r\n      </form>\r\n      <p className={styles.text}>\r\n        Вы — новый пользователь?&nbsp;\r\n        <Link className={styles.link} to={'/register'}>\r\n          Зарегистрироваться\r\n        </Link>\r\n      </p>\r\n      <p className={styles.text}>\r\n        Забыли пароль?&nbsp;\r\n        <Link className={styles.link} to={'/forgot-password'}>\r\n          Восстановить пароль\r\n        </Link>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AuthPage\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\r\nimport { resetPasswordApi, forgotPasswordApi } from '../api'\r\n\r\ninterface IinitialState {\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n  success: boolean,\r\n  errorMessage?: string,\r\n}\r\ntype Tform = {\r\n  password: string,\r\n  token: string\r\n}\r\nexport const initialState: IinitialState = {\r\n  isLoading: false,\r\n  hasError: false,\r\n  success: false,\r\n  errorMessage: '',\r\n}\r\n\r\nexport const forgotPassword = createAsyncThunk('password/forgot', async (email: string) => {\r\n  const res = await forgotPasswordApi(email)\r\n  if (res.success) {\r\n    localStorage.setItem('emailConfirmationSended', 'true')\r\n  } else {\r\n    throw new Error(res.message)\r\n  }\r\n  return res\r\n})\r\nexport const resetPassword = createAsyncThunk('password/reset', async (form: Tform) => {\r\n  const res = await resetPasswordApi(form)\r\n  if (!res.success) {\r\n    throw new Error(res.message)\r\n  } \r\n  return res\r\n})\r\n\r\nexport const passwordSlice = createSlice({\r\n  name: 'password',\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(resetPassword.pending, (state) => {\r\n        state.errorMessage = ''\r\n        state.isLoading = true\r\n        state.hasError = false\r\n        state.success = false\r\n      })\r\n      .addCase(resetPassword.rejected, (state, action) => {\r\n        state.errorMessage = action.error.message\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        state.success = false\r\n      })\r\n      .addCase(resetPassword.fulfilled, (state) => {\r\n        state.errorMessage = ''\r\n        state.isLoading = false\r\n        state.hasError = false\r\n        state.success = true\r\n      })\r\n      .addCase(forgotPassword.pending, (state) => {\r\n        state.errorMessage = ''\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(forgotPassword.rejected, (state, action) => {\r\n        state.errorMessage = action.error.message\r\n        state.isLoading = false\r\n        state.hasError = true\r\n      })\r\n      .addCase(forgotPassword.fulfilled, (state) => {\r\n        state.errorMessage = ''\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n  },\r\n})\r\n\r\nexport default passwordSlice.reducer\r\n","import React, { FC, FormEvent } from 'react';\r\nimport styles from '../register/register.module.css';\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link } from 'react-router-dom';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks';\r\nimport { forgotPassword } from 'services/slices/passwordSlice';\r\nimport { useLocation } from 'react-router-dom'\r\nimport { TLocationState } from 'types/types';\r\n\r\nconst ForgotPassword: FC = () => {\r\n    const [email, setEmail] = React.useState<string>(\"\");\r\n    const dispatch = useAppDispatch();\r\n    const location = useLocation<TLocationState>();\r\n    const { isAuthorized } = useAppSelector(store => store.auth)\r\n    const { isLoading } = useAppSelector(store => store.password)\r\n    const hasConfirmation = localStorage.getItem('emailConfirmationSended');\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(e.target.value);\r\n    };\r\n    const onSubmit = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        dispatch(forgotPassword(email))\r\n        setEmail(\"\");\r\n    }\r\n    if (isAuthorized) {\r\n        console.log('location state ', location.state)\r\n        const { from } = location.state || { from: { pathname: '/' } }\r\n        return (\r\n            <Redirect to={from} />\r\n        )\r\n    }\r\n\r\n    if (!isLoading && hasConfirmation) return (<Redirect to={{ pathname: '/reset-password', state: { from: { pathname: '/forgot-password' } } }} />)\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <form className={styles.form} onSubmit={onSubmit}>\r\n                <h1 className={styles.heading}>Восстановление пароля</h1>\r\n                <Input\r\n                    type=\"email\"\r\n                    placeholder=\"Укажите e-mail\"\r\n                    name=\"email\"\r\n                    value={email}\r\n                    onChange={onChange}\r\n                />\r\n\r\n                <span className={styles.button}>\r\n                    <Button>Восстановить</Button>\r\n                </span>\r\n            </form>\r\n            <p className={styles.text}>\r\n                Вспомнили пароль?&nbsp;\r\n                <Link className={styles.link} to={'/login'}>\r\n                    Войти\r\n                </Link>\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ForgotPassword;","import { createSlice } from '@reduxjs/toolkit';\r\nimport { nanoid } from '@reduxjs/toolkit';\r\nimport {TIngredient, TFiller} from '../../types/types';\r\n\r\ninterface IinitialState {\r\n  sortedCart: {\r\n    bun: TIngredient | null,\r\n    fillers: Array<TFiller>,\r\n  },\r\n  counts: {},\r\n  total: number,\r\n}\r\n\r\nexport const initialState: IinitialState = {\r\n  sortedCart: {\r\n    bun: null,\r\n    fillers: [],\r\n  },\r\n  counts: {},\r\n  total: 0,\r\n}\r\n\r\nexport const cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addIngredient: (state, action) => {\r\n\r\n      const {item} = action.payload;\r\n      // управляем счетчиком ингридиентов\r\n      if (!state.counts[item._id]) {\r\n        state.counts[item._id] = 1;\r\n      } else {\r\n        state.counts[item._id]++;\r\n      }\r\n\r\n      // сортируем\r\n      if (item.type === 'bun') {\r\n        const bunId = state.sortedCart.bun?._id;\r\n        state.counts[bunId] && state.counts[bunId]--\r\n        state.sortedCart.bun = item;\r\n      } else {\r\n        const newFillers = [...state.sortedCart.fillers, {item, constructorId: nanoid()}]\r\n        state.sortedCart.fillers = newFillers;\r\n      }\r\n    },\r\n    deleteIngredient: (state, action) => {\r\n      const { id, itemIndex } = action.payload;\r\n      const newFillers = [...state.sortedCart.fillers];\r\n      newFillers.splice(itemIndex, 1);\r\n      if (state.counts[id] === 1){\r\n        state.counts[id] = 0;\r\n      } else {\r\n        state.counts[id]--;\r\n      }\r\n      state.sortedCart.fillers = newFillers;\r\n    },\r\n    resetCart: (state) => state = initialState,\r\n    moveIngredient: (state, action) => {\r\n      const { dragIndex, dropIndex } = action.payload;\r\n      [state.sortedCart.fillers[dragIndex], state.sortedCart.fillers[dropIndex]] = [state.sortedCart.fillers[dropIndex], state.sortedCart.fillers[dragIndex]];\r\n\r\n    },\r\n    countTotal: (state) => {\r\n      const fillers = state.sortedCart.fillers;\r\n      state.total = state.sortedCart.bun?.price \r\n      ? (fillers.reduce((acc, p) => acc + p.item.price, 0) + state.sortedCart.bun?.price * 2)\r\n      : (fillers.reduce((acc, p) => acc + p.item.price, 0));\r\n    }\r\n  },\r\n})\r\n\r\nexport const { addIngredient, deleteIngredient, resetCart, countTotal, moveIngredient  } = cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;\r\n","import React, { useRef, FC } from 'react'\r\nimport ingredientStyles from './ingredient.module.css'\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useAppDispatch } from '../../../../services/hooks'\r\nimport { deleteIngredient, countTotal, moveIngredient } from 'services/slices/cartSlice'\r\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd'\r\nimport { TIngredient } from 'types/types'\r\nimport { XYCoord } from 'dnd-core'\r\n\r\ninterface IConstructorIngredient {\r\n  item: TIngredient\r\n  index: number\r\n}\r\ninterface DragItem {\r\n  index: number\r\n  id: string\r\n  type: string\r\n}\r\n\r\nconst Ingredient: FC<IConstructorIngredient> = ({ item, index }) => {\r\n  const dispatch = useAppDispatch()\r\n  const ref = useRef<HTMLLIElement>(null)\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: 'sort',\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n        isOver: monitor.isOver(),\r\n      }\r\n    },\r\n    hover(item: DragItem, monitor: DropTargetMonitor) {\r\n      if (!ref.current) {\r\n        return\r\n      }\r\n\r\n      const dragIndex = item.index\r\n      const dropIndex = index\r\n\r\n      if (dragIndex === dropIndex) {\r\n        return\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n      const clientOffset = monitor.getClientOffset()\r\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top\r\n\r\n      if (dragIndex < dropIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n      if (dragIndex > dropIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n      dispatch(moveIngredient({ dragIndex, dropIndex }))\r\n      item.index = dropIndex\r\n    },\r\n  })\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: 'sort',\r\n    item: () => {\r\n      return { item, index }\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  const handleClose = () => {\r\n    dispatch(deleteIngredient({ id: item._id, itemIndex: index }))\r\n    dispatch(countTotal())\r\n  }\r\n  const opacity = isDragging ? 0 : 1\r\n\r\n  drag(drop(ref))\r\n\r\n  return (\r\n    <li className={ingredientStyles.list_item} style={{ opacity }} data-handler-id={handlerId} ref={ref}>\r\n      <div className={ingredientStyles.item_container}>\r\n        <DragIcon type='primary' />\r\n        <ConstructorElement text={item.name} price={item.price} thumbnail={item.image} handleClose={handleClose} />\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Ingredient\r\n","import React, { FC } from 'react'\r\nimport { Ingredient } from '../ingredient'\r\nimport ingredientsListStyles from './ingredients-list.module.css'\r\nimport { useAppSelector } from '../../../../services/hooks'\r\n\r\nconst IngredientsList: FC = () => {\r\n  const { fillers } = useAppSelector((store) => store.cart.sortedCart)\r\n\r\n  return (\r\n    <ul className={ingredientsListStyles.main_container}>\r\n      {fillers &&\r\n        fillers.map((el, index) => <Ingredient key={el.constructorId || el.item._id} item={el.item} index={index} />)}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default IngredientsList\r\n","import { FC } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from './loader.module.css'\r\n\r\ninterface ILoader {\r\n    type?: 'default' | 'light';\r\n}\r\n\r\nconst LoaderSpinner: FC<ILoader> = ({type = 'default'}) => {\r\n    return (\r\n        <>\r\n            {type === 'default' ? (\r\n                <div className={s.overlay}>\r\n                    <Loader\r\n                        type=\"Oval\"\r\n                        color=\"#801AB2\"\r\n                        height={64}\r\n                        width={64}\r\n                    />\r\n                </div>\r\n            ) : (\r\n                <Loader\r\n                    type=\"Oval\"\r\n                    color=\"#801AB2\"\r\n                    height={96}\r\n                    width={96}\r\n                />\r\n            )}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoaderSpinner;\r\n","import React, { FC } from 'react';\r\nimport orderDetailsStyles from './order-details.module.css';\r\nimport { ReactComponent as OrderDone } from '../../images/order-done.svg';\r\nimport { useAppSelector } from 'services/hooks';\r\nimport LoaderSpinner from 'components/loader/loader';\r\nimport {TOrder} from 'types/types'\r\n\r\nconst OrderDetails: FC = () => {\r\n    const { order, isLoading } = useAppSelector(store => store.order)\r\n    return (\r\n        <>\r\n            <span className={orderDetailsStyles.order_number}>\r\n                {order  as TOrder && (order as TOrder).number}\r\n            </span>\r\n\r\n            <span className={orderDetailsStyles.subtitle}>идентификатор заказа</span>\r\n            {/* <span className={orderDetailsStyles.name}>{(order as TOrder).name}</span> */}\r\n            <span className={orderDetailsStyles.icon}>\r\n                {isLoading ? <LoaderSpinner type=\"light\" /> : <OrderDone />}\r\n            </span>\r\n            <p className={orderDetailsStyles.text}>Ваш заказ начали готовить</p>\r\n            <p className={`${orderDetailsStyles.text} ${orderDetailsStyles.text_secondary}`}>Дождитесь готовности на орбитальной станции</p>\r\n\r\n        </>\r\n    )\r\n}\r\nexport default OrderDetails","import React, {FC} from 'react';\r\nimport overlayStyles from './modal-overlay.module.css';\r\n\r\ninterface IModalOverlay {\r\n  isOpen: boolean;\r\n  onClick: () => void\r\n}\r\nconst ModalOverlay: FC<IModalOverlay> = ({ isOpen, onClick }) => {\r\n  const overlay = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    const handleOverlayClick = (e: Event) => {\r\n      if (e.target === overlay.current) {\r\n        onClick();\r\n      }\r\n    };\r\n    window.addEventListener(\"click\", handleOverlayClick);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"click\", handleOverlayClick);\r\n    };\r\n  }, [onClick]);\r\n\r\n  return (\r\n    <div className={isOpen ? `${overlayStyles.overlay} ${overlayStyles.overlay_opened}` : overlayStyles.overlay} ref={overlay}></div>\r\n  );\r\n}\r\n\r\nexport default ModalOverlay;\r\n","import React, { FC } from 'react';\r\nimport modalStyles from './modal.module.css';\r\nimport ReactDOM from 'react-dom';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { ModalOverlay } from './parts';\r\nimport { useAppSelector } from 'services/hooks';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\ninterface IModal {\r\n  title?: string;\r\n  onClose: () => void;\r\n  name: 'Order' | 'Details';\r\n  titleType?: 'id' | 'default';\r\n}\r\n\r\nconst Modal: FC<IModal> = ({ title, onClose, children, name, titleType = 'default'}) => {\r\n  const isOpen = useAppSelector(store => store.modal[`is${name}ModalOpen`])\r\n\r\n  React.useEffect(() => {\r\n    const handleEsc = (event: {keyCode: number}) => {\r\n      if (event.keyCode === 27) {\r\n        onClose();\r\n      }\r\n    };\r\n    window.addEventListener(\"keydown\", handleEsc);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleEsc);\r\n    };\r\n  }, [onClose]);\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className={modalStyles.container}>\r\n      <div className={modalStyles.modal}>\r\n        <h2 className={titleType === 'id' ? modalStyles.heading_type_id : modalStyles.heading}>{title}</h2>\r\n        <span className={modalStyles.close} onClick={onClose}>\r\n          <CloseIcon type='primary' />\r\n        </span>\r\n        {children}\r\n      </div>\r\n      <ModalOverlay isOpen={isOpen} onClick={onClose} />\r\n    </div>\r\n    , (modalRoot as HTMLElement)\r\n  )\r\n}\r\nexport default Modal;\r\n\r\n\r\n\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\r\nimport { getAllOrdersApi, getOrderByIdApi, getUserOrdersApi, refreshExpiredTokenApi, sendOrderApi } from 'services/api'\r\nimport {TOrder, TallOrdersList, TUser} from '../../types/types'\r\n\r\ninterface IinitialState {\r\n  allOrders: TallOrdersList\r\n  userOrders: TallOrdersList,\r\n  orderToShow: {} | TOrder,\r\n  total: number,\r\n  totalToday: number,\r\n  order: TOrder | {},\r\n  isLoading: boolean,\r\n  hasError: boolean,\r\n}\r\n\r\ninterface IApiResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  user?: TUser;\r\n  order: TOrder | Array<TOrder>\r\n}\r\n\r\n\r\n\r\nexport const setOrder = createAsyncThunk('order/setOrder', async (ids: Array<string>) => {\r\n  try {\r\n    const response: IApiResponse = await sendOrderApi(ids)\r\n    console.log(response)\r\n    if (response && response.success) {\r\n      return response.order\r\n    }\r\n    throw new Error(response.message)\r\n  } catch (error) {\r\n    console.log(error)\r\n    if (error === 'jwt expired') {\r\n      console.log(error)\r\n      return await refreshExpiredTokenApi(sendOrderApi, ids)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error}\"`)\r\n    return Promise.reject(error)\r\n  }\r\n})\r\n\r\nexport const getOrders = createAsyncThunk('order/getOrders', async () => {\r\n  try {\r\n    const response: IApiResponse = await getAllOrdersApi()\r\n    if (response && response.success) {\r\n      console.log(response)\r\n      return response\r\n    }\r\n    throw new Error(response.message)\r\n  } catch (error) {\r\n    if (error.message === 'jwt expired') {\r\n      console.log(error.message)\r\n      return await refreshExpiredTokenApi(getAllOrdersApi, null)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error}\"`)\r\n    return Promise.reject(error.message)\r\n  }\r\n})\r\n\r\nexport const getUserOrders = createAsyncThunk('order/getUserOrders', async () => {\r\n  try {\r\n    const response: IApiResponse = await getUserOrdersApi()\r\n    if (response && response.success) {\r\n      console.log(response)\r\n      return response\r\n    }\r\n    throw new Error(response.message)\r\n  } catch (error) {\r\n    if (error.message === 'jwt expired') {\r\n      console.log(error.message)\r\n      return await refreshExpiredTokenApi(getUserOrdersApi, null)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error.message}\"`)\r\n    return Promise.reject(error.message)\r\n  }\r\n})\r\nexport const getOrderById = createAsyncThunk('order/getOrderById', async (id: string) => {\r\n  try {\r\n    const response: IApiResponse= await getOrderByIdApi(id)\r\n    if (response && response.success) {\r\n      console.log(response)\r\n      return response\r\n    }\r\n    throw new Error(response.message)\r\n  } catch (error) {\r\n    if (error.message === 'jwt expired') {\r\n      console.log(error.message)\r\n      return await refreshExpiredTokenApi(getOrderByIdApi, id)\r\n    }\r\n    console.log(`Catched and hadled error: \"${error.message}\"`)\r\n    return Promise.reject(error.message)\r\n  }\r\n})\r\n\r\nexport const initialState: IinitialState = {\r\n  allOrders: [],\r\n  userOrders: [],\r\n  orderToShow: {},\r\n  total: null,\r\n  totalToday: null,\r\n  order: {},\r\n  isLoading: false,\r\n  hasError: false,\r\n}\r\nexport const orderSlice = createSlice({\r\n  name: 'order',\r\n  initialState,\r\n  reducers: {\r\n    clearOrder: (state) => {\r\n      state.order = {}\r\n    },\r\n    setOrderToShow: (state, action: PayloadAction<TOrder>) => {\r\n      state.orderToShow = action.payload\r\n    },\r\n    resetOrderToShow: (state) => {\r\n      state.orderToShow = {}\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(setOrder.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(setOrder.fulfilled, (state, action: PayloadAction<TOrder>) => {\r\n        state.order = action.payload\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(setOrder.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        state.order = {}\r\n      })\r\n      .addCase(getOrders.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(getOrders.fulfilled, (state, action) => {\r\n        state.allOrders = action.payload.orders\r\n        state.total = action.payload.total\r\n        state.totalToday = action.payload.totalToday\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(getOrders.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n      })\r\n      .addCase(getUserOrders.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(getUserOrders.fulfilled, (state, action) => {\r\n        state.userOrders = action.payload.orders\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(getUserOrders.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        state.userOrders = []\r\n      })\r\n      .addCase(getOrderById.pending, (state) => {\r\n        state.isLoading = true\r\n        state.hasError = false\r\n      })\r\n      .addCase(getOrderById.fulfilled, (state, action) => {\r\n        // state.userToShow = action.payload\r\n        state.isLoading = false\r\n        state.hasError = false\r\n      })\r\n      .addCase(getOrderById.rejected, (state) => {\r\n        state.isLoading = false\r\n        state.hasError = true\r\n        // state.userToShow = {}\r\n      })\r\n  },\r\n})\r\n\r\nexport const { clearOrder, setOrderToShow, resetOrderToShow } = orderSlice.actions\r\nexport default orderSlice.reducer\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\ninterface IinitialState {\r\n    isDetailsModalOpen: boolean;\r\n    isOrderModalOpen: boolean;\r\n}\r\nexport const initialState: IinitialState = {\r\n    isDetailsModalOpen: false,\r\n    isOrderModalOpen: false\r\n}\r\n\r\nexport const modalSlice = createSlice({\r\n    name: 'modal',\r\n    initialState,\r\n    reducers: {\r\n        openDetailsModal: (state) => {\r\n            state.isDetailsModalOpen = true\r\n        },\r\n        closeDetailsModal: (state) => {\r\n            state.isDetailsModalOpen = false\r\n        },\r\n        openOrderModal: (state) => {\r\n            state.isOrderModalOpen = true\r\n        },\r\n        closeOrderModal: (state) => {\r\n            state.isOrderModalOpen = false\r\n        },\r\n    }\r\n})\r\n\r\nexport const { openDetailsModal, closeDetailsModal, openOrderModal, closeOrderModal } = modalSlice.actions;\r\nexport default modalSlice.reducer;","import React, { FC, useMemo } from 'react'\r\nimport orderStyles from './order.module.css'\r\nimport { Button, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { useAppSelector, useAppDispatch } from '../../../../services/hooks'\r\nimport OrderDetails from '../../../order-details/order-details'\r\nimport Modal from '../../../modal/modal'\r\nimport { clearOrder, setOrder } from 'services/slices/orderSlice'\r\nimport { closeOrderModal, openOrderModal } from 'services/slices/modalSlice'\r\nimport { resetCart } from 'services/slices/cartSlice'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst Order: FC = () => {\r\n  const { isAuthorized } = useAppSelector((store) => store.auth)\r\n  const { isOrderModalOpen } = useAppSelector((store) => store.modal)\r\n  const { total } = useAppSelector((store) => store.cart)\r\n  const { fillers, bun } = useAppSelector((store) => store.cart.sortedCart)\r\n  const dispatch = useAppDispatch()\r\n  const history = useHistory()\r\n\r\n  const idArray = useMemo(() => {\r\n    const orderItems = fillers.map((el) => el.item?._id)\r\n    if (bun) {\r\n      orderItems.push(bun?._id)\r\n    }\r\n    return orderItems\r\n  }, [fillers, bun])\r\n\r\n  const handleOpenModal = () => {\r\n    if (!isAuthorized) {\r\n      return history.replace('/login')\r\n    }\r\n    if (bun) {\r\n      dispatch(setOrder(idArray))\r\n      dispatch(openOrderModal())\r\n    }\r\n  }\r\n\r\n  const handleCloseModal = () => {\r\n    dispatch(closeOrderModal())\r\n    dispatch(resetCart())\r\n    dispatch(clearOrder())\r\n  }\r\n\r\n  return (\r\n    <div className={orderStyles.order}>\r\n      <span className={orderStyles.price}>\r\n        {total}&nbsp;\r\n        <CurrencyIcon type='primary' />\r\n      </span>\r\n      <Button onClick={handleOpenModal}>Оформить заказ</Button>\r\n      {isOrderModalOpen && (\r\n        <Modal name='Order' onClose={handleCloseModal}>\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\nexport default Order\r\n","import React, { FC } from 'react'\r\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport bunStyles from './bun.module.css'\r\nimport { useAppSelector } from 'services/hooks'\r\nimport { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { TIngredient } from 'types/types'\r\n\r\ninterface IBunPos {\r\n  position: 'top' | 'bottom'\r\n}\r\nconst Bun: FC<IBunPos> = ({ position }) => {\r\n  const { bun } = useAppSelector((store) => store.cart.sortedCart)\r\n  const [isEmpty, setIsEmpty] = useState(true)\r\n  useEffect(() => {\r\n    if (bun) {\r\n      setIsEmpty(false)\r\n    } else {\r\n      setIsEmpty(true)\r\n    }\r\n  }, [bun])\r\n  const positionText: string = position === 'top' ? '(верх)' : '(низ)'\r\n\r\n  return (\r\n    <div className={isEmpty ? bunStyles.bun_empty : bunStyles.bun}>\r\n      {!isEmpty ? (\r\n        <ConstructorElement\r\n          type={position}\r\n          isLocked={true}\r\n          text={`${(bun as TIngredient)?.name} ${positionText}`}\r\n          price={(bun as TIngredient)?.price}\r\n          thumbnail={(bun as TIngredient)?.image}\r\n        />\r\n      ) : (\r\n        <ConstructorElement\r\n          type={position}\r\n          text={`Место для аппетитной булки ${positionText}`}\r\n          thumbnail=''\r\n          price={0}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Bun\r\n","import React, { FC } from 'react'\r\nimport styles from './burger-constructor.module.css'\r\nimport { IngredientsList, Order, Bun } from './parts'\r\nimport { useAppDispatch } from '../../services/hooks'\r\nimport { useDrop } from 'react-dnd'\r\nimport { addIngredient, countTotal } from 'services/slices/cartSlice'\r\n\r\nconst BurgerConstructor: FC = () => {\r\n  const dispatch = useAppDispatch()\r\n\r\n  const [{ isHover }, dropRef] = useDrop({\r\n    accept: 'ingredients',\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n    drop(item) {\r\n      dispatch(addIngredient(item))\r\n      dispatch(countTotal())\r\n    },\r\n  })\r\n\r\n  const border = isHover ? '1px dashed gray' : 'none'\r\n\r\n  return (\r\n    <section className={styles.container} ref={dropRef} style={{ border }}>\r\n      <Bun position='top' />\r\n      <div className={styles.scroller}>\r\n        <IngredientsList />\r\n      </div>\r\n      <Bun position='bottom' />\r\n      <Order />\r\n    </section>\r\n  )\r\n}\r\nexport default BurgerConstructor\r\n","import React, {FC} from 'react';\r\nimport cardStyles from './card.module.css';\r\nimport { Counter, CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useAppSelector } from 'services/hooks'\r\nimport { useDrag } from \"react-dnd\";\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { TIngredient, TLocationState } from 'types/types';\r\n\r\ninterface ICard {\r\n    item: TIngredient;\r\n    onClick: (item: TIngredient) => void\r\n}\r\nconst Card: FC<ICard>= ({ item, onClick }) => {\r\n    const location = useLocation<TLocationState>()\r\n    const { counts } = useAppSelector(store => store.cart)\r\n    const [, dragRef] = useDrag({\r\n        type: \"ingredients\",\r\n        item: { item },\r\n        collect: monitor => ({\r\n            isDrag: monitor.isDragging()\r\n        })\r\n    })\r\n\r\n    return (\r\n        <Link className={cardStyles.item} to={{\r\n            pathname: `/ingredients/${item._id}`,\r\n            state: { from: location.pathname, pushLocation: location }\r\n        }}>\r\n            <article className={cardStyles.card} key={item._id} onClick={() => onClick(item)} ref={dragRef}>\r\n                {counts[item._id] > 0 && <Counter count={item.type === 'bun' ? counts[item._id] + 1 : counts[item._id]} />}\r\n                <picture className={cardStyles.picture}>\r\n                    <source media=\"(max-width: 767px)\" srcSet={item.image_mobile} />\r\n                    <source media=\"(min-width: 768px)\" srcSet={item.image_large} />\r\n                    <img className={cardStyles.image} src={item.image} alt={item.name} />\r\n                </picture>\r\n                <span className={cardStyles.price}>{item.price}&nbsp;<CurrencyIcon type=\"primary\" /></span>\r\n                <p className={cardStyles.text}>{item.name}</p>\r\n            </article>\r\n        </Link>\r\n    )\r\n}\r\nexport default Card;\r\n","import React, { FC, Ref } from 'react';\r\nimport styles from './menu-item.module.css'\r\nimport Card from '../card/card';\r\nimport { TIngredient, TingredientList } from 'types/types';\r\n\r\ninterface IMenuItem {\r\n    title: string;\r\n    refs: Ref<HTMLHeadingElement>;\r\n    data: TingredientList;\r\n    onClick: (item: TIngredient) => void;\r\n}\r\n\r\nconst MenuItem: FC<IMenuItem> = React.memo(({ title, refs, data, onClick }) => {\r\n    return (\r\n        <>\r\n            <h2 className={styles.title} ref={refs}>{title}</h2>\r\n            <ul className={styles.items}>\r\n                {data && data.map(item => (\r\n                    <li key={item._id}>\r\n                        <Card item={item} onClick={onClick} />\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n);\r\nexport default MenuItem;\r\n","import React, { useEffect, FC } from 'react';\r\nimport menuStyles from './menu.module.css';\r\nimport { useAppSelector } from 'services/hooks';\r\nimport { useInView } from 'react-intersection-observer';\r\nimport { MenuItem } from '../menu-item';\r\nimport { TIngredient } from 'types/types';\r\n\r\ninterface IMenu {\r\n    setCurrent: (current: string) => void;\r\n    onClick: (item: TIngredient) => void;\r\n}\r\n\r\nconst Menu: FC<IMenu>= ({ setCurrent, onClick }) => {\r\n    const { ingredients } = useAppSelector(store => store.ingredients);\r\n\r\n    const [bunRef, inViewBun] = useInView({ threshold: 0 });\r\n    const [sauceRef, inViewSauce] = useInView({ threshold: 0 });\r\n    const [mainRef, inViewMain] = useInView({ threshold: 0 });\r\n\r\n    useEffect(() => {\r\n        if (inViewBun) {\r\n            setCurrent('bun')\r\n        } else if (inViewSauce) {\r\n            setCurrent('sauce')\r\n        } else if (inViewMain) {\r\n            setCurrent('main')\r\n        }\r\n    }, [setCurrent, inViewBun, inViewSauce, inViewMain])\r\n\r\n    return (\r\n        <div className={menuStyles.scroller}>\r\n            <MenuItem title=\"Булки\" refs={bunRef} data={ingredients && ingredients.filter(ingredient => ingredient.type === 'bun')} onClick={onClick} />\r\n            <MenuItem title=\"Начинки\" refs={mainRef} data={ingredients && ingredients.filter(ingredient => ingredient.type === 'main')} onClick={onClick} />\r\n            <MenuItem title=\"Соусы\" refs={sauceRef} data={ingredients && ingredients.filter(ingredient => ingredient.type === 'sauce')} onClick={onClick} />\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Menu;\r\n\r\n","import React, { FC } from 'react';\r\nimport tabStyles from './tabs.module.css';\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\n\r\ntype TTab = {\r\n  value: string;\r\n  title:string;\r\n}\r\nconst tabs: Array<TTab>  = [\r\n  {\r\n    value: 'bun',\r\n    title: 'Булки'\r\n  },\r\n  {\r\n    value: 'main',\r\n    title: 'Начинки'\r\n  },\r\n  {\r\n    value: 'sauce',\r\n    title: 'Соусы'\r\n  },\r\n]\r\n\r\ninterface ITabs {\r\n  current: string;\r\n}\r\n\r\nconst Tabs: FC<ITabs> = ({ current }) => {\r\n  return (\r\n    <div className={tabStyles.tab_container}>\r\n      {tabs.map(({ value, title }) => (\r\n        <Tab\r\n          value={value}\r\n          key={value}\r\n          active={current === value}\r\n          onClick={()=>{}}\r\n        >\r\n          {title}\r\n        </Tab>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\nexport default React.memo(Tabs);\r\n\r\n","import { createAsyncThunk, createSlice, PayloadAction  } from \"@reduxjs/toolkit\";\r\nimport { API } from \"components/app/app\";\r\nimport {TingredientList, TIngredient} from '../../types/types'\r\n\r\ninterface IngredientsState {\r\n    ingredients: TingredientList;\r\n    ingredientToShow: TIngredient | {};\r\n    isLoading: Boolean;\r\n    hasError: Boolean;\r\n}\r\n\r\n\r\nexport const getIngredients = createAsyncThunk(\r\n    'ingredients/getIngredients',\r\n    async () => {\r\n        try {\r\n            const response = await fetch(API + '/ingredients');\r\n            if (!response.ok) {\r\n                return Promise.reject('Failed response: ' + response)\r\n            }\r\n            const ingredients = await response.json();\r\n            if (ingredients.success) {\r\n                return ingredients.data;\r\n            } else {\r\n                return Promise.reject(response)\r\n            }\r\n        } catch (error) {\r\n            console.log('Catched error: ' + error.message)\r\n            return Promise.reject(error.message)\r\n        }\r\n    }\r\n)\r\nexport const initialState: IngredientsState = {\r\n    ingredients: [],\r\n    ingredientToShow: {},\r\n    isLoading: false,\r\n    hasError: false,\r\n}\r\nexport const ingredientsSlice = createSlice({\r\n    name: 'ingredients',\r\n    initialState,\r\n    reducers: {\r\n        setIngredientToShow: (state, action: PayloadAction<TIngredient>) => {\r\n            state.ingredientToShow = action.payload;\r\n        },\r\n        resetIngredientToShow: (state) => {\r\n            state.ingredientToShow = {};\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n        .addCase(getIngredients.pending, (state) => {\r\n            state.isLoading = true;\r\n            state.hasError = false;\r\n          })\r\n        .addCase(getIngredients.fulfilled, (state, action) => {\r\n            state.ingredients = action.payload;\r\n            state.isLoading = false;\r\n            state.hasError = false;\r\n        })\r\n        .addCase(getIngredients.rejected, (state) => {\r\n            state.isLoading = false;\r\n            state.hasError = true;\r\n            state.ingredients = [];\r\n          })\r\n        \r\n    }\r\n})\r\n\r\nexport const { setIngredientToShow, resetIngredientToShow } = ingredientsSlice.actions;\r\n\r\nexport default ingredientsSlice.reducer;","import React, {FC} from \"react\";\r\nimport ingredientsStyles from \"./burger-ingredients.module.css\";\r\nimport { Tabs, Menu } from './parts';\r\nimport { useAppDispatch } from 'services/hooks';\r\nimport { setIngredientToShow } from 'services/slices/ingredientsSlice';\r\nimport { openDetailsModal } from \"services/slices/modalSlice\";\r\nimport { TIngredient } from \"types/types\";\r\n\r\n\r\nconst BurgerIngredients: FC = () => {\r\n  const [current, setCurrent] = React.useState('bun')\r\n  const dispatch = useAppDispatch();\r\n\r\n  const handleOpenModal = (item: TIngredient):void => {\r\n    dispatch(setIngredientToShow(item))\r\n    dispatch(openDetailsModal())\r\n  }\r\n\r\n  return (\r\n    <section className={ingredientsStyles.ingredients}>\r\n      <h1 className={ingredientsStyles.title}>Соберите бургер</h1>\r\n      <Tabs current={current} />\r\n      <Menu setCurrent={setCurrent} onClick={handleOpenModal} />\r\n    </section>\r\n  );\r\n}\r\nexport default React.memo(BurgerIngredients);","import BurgerConstructor from 'components/burger-constructor/burger-constructor';\r\nimport BurgerIngredients from 'components/burger-ingredients/burger-ingredients';\r\nimport { FC } from 'react';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport styles from './home.module.css'\r\n\r\nconst HomePage: FC = () => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <DndProvider backend={HTML5Backend}>\r\n                <BurgerIngredients />\r\n                <BurgerConstructor />\r\n            </DndProvider>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HomePage;","import React, { FC } from 'react';\r\nimport nutritionStyles from './nutrition-item.module.css'\r\n\r\ninterface INutrition {\r\n    title: string;\r\n    value: number;\r\n}\r\nconst NutritionItem: FC<INutrition> = ({ title, value }) => {\r\n    return (\r\n        <li className={nutritionStyles.nutrition_item}>\r\n            <p className={nutritionStyles.text}>{title}</p>\r\n            <p className={nutritionStyles.value}>{value}</p>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default NutritionItem;\r\n","import React, { FC } from 'react';\r\nimport nutritionListStyles from './nutrition-list.module.css';\r\nimport { NutritionItem } from '../nutrition-item'\r\n\r\ninterface INutritionList {\r\n    calories: number | undefined;\r\n    proteins: number | undefined; \r\n    fat: number | undefined;\r\n    carbohydrates: number | undefined;\r\n}\r\n\r\nconst NutritionList: FC<INutritionList> = ({ calories, proteins, fat, carbohydrates }) => {\r\n    return (\r\n                <ul className={nutritionListStyles.nutrition}>\r\n                    <NutritionItem title='Калории,ккал' value={(calories as number)} />\r\n                    <NutritionItem title='Белки, г' value={(proteins as number)} />\r\n                    <NutritionItem title='Жиры, г' value={(fat as number)} />\r\n                    <NutritionItem title='Углеводы, г' value={(carbohydrates as number)} />\r\n                </ul>\r\n    )\r\n}\r\nexport default NutritionList;\r\n","import React, {FC} from 'react';\r\nimport { useAppSelector, useAppParams } from 'services/hooks';\r\nimport detailsModalStyles from './ingredient-details.module.css';\r\nimport { NutritionList } from './parts';\r\nimport LoaderSpinner from 'components/loader/loader';\r\n\r\nconst IngredientDetails: FC = () => {\r\n    const { id } = useAppParams();\r\n    const { ingredients, isLoading, hasError } = useAppSelector(store => store.ingredients);\r\n    const activeIngredientFromStore = useAppSelector(store => store.ingredients.ingredientToShow);\r\n\r\n    let activeIngredient;\r\n    if (id) {\r\n        activeIngredient = ingredients.find(item => item._id === id)\r\n    } else {\r\n        activeIngredient = activeIngredientFromStore\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!isLoading && !hasError && ingredients.length !== 0 ? (\r\n                        <div className={detailsModalStyles.detail}>\r\n                        <picture className={detailsModalStyles.picture}>\r\n                            <source media=\"(max-width: 768px)\" srcSet={activeIngredient.image_mobile} />\r\n                            <source media=\"(min-width: 1024px)\" srcSet={activeIngredient.image_large} />\r\n                            <img src={activeIngredient.image} alt={activeIngredient.name} className={detailsModalStyles.image} />\r\n                        </picture>\r\n                        <h3 className={detailsModalStyles.title}>{activeIngredient.name}</h3>\r\n                        <NutritionList {...activeIngredient} />\r\n                    </div>\r\n            ) : (<LoaderSpinner />)\r\n            }\r\n        </>\r\n\r\n    )\r\n}\r\nexport default IngredientDetails;\r\n\r\n","import React, { FC } from 'react';\r\nimport IngredientDetails from '../../components/ingredient-details/ingredient-details';\r\nimport styles from './ingredient-page.module.css';\r\n\r\nconst IngredientPage: FC = () => {\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <h2 className={styles.title}>Детали ингредиента</h2>\r\n      <IngredientDetails />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IngredientPage;","import { FC } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styles from './not-found-404.module.css'\r\n\r\nconst NotFound404: FC = () => {\r\n  return (\r\n    <section className={styles.wrapper}>\r\n      <p className={styles.title}>404</p>\r\n      <p className={styles.text}>\r\n        Вернуться на{' '}\r\n        <Link className={styles.link} to={{ pathname: '/' }}>\r\n          Главную\r\n        </Link>\r\n      </p>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default NotFound404\r\n","import s from './profile-nav.module.css'\r\nimport { NavLink, useHistory } from 'react-router-dom'\r\nimport { useAppDispatch } from 'services/hooks'\r\nimport { logout } from 'services/slices/authSlice'\r\nimport { FC } from 'react'\r\n\r\ninterface IProfileNav {\r\n  text: string\r\n}\r\n\r\nconst ProfileNav: FC<IProfileNav> = ({ text }) => {\r\n  const dispatch = useAppDispatch()\r\n  const history = useHistory()\r\n  const onClick = async () => {\r\n    await dispatch(logout())\r\n    history.replace({ pathname: '/login' })\r\n  }\r\n\r\n  return (\r\n    <div className={s.navmenu}>\r\n      <ul className={s.menu}>\r\n        <li className={s.menu_item}>\r\n          <NavLink to={'/profile'} exact className={s.link} activeClassName={s.active}>\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.menu_item}>\r\n          <NavLink to={{ pathname: `/profile/orders` }} exact className={s.link} activeClassName={s.active}>\r\n            История заказов\r\n          </NavLink>\r\n        </li>\r\n        <li className={s.menu_item}>\r\n          <NavLink to={{ pathname: '/login' }} exact className={s.link} activeClassName={s.active} onClick={onClick}>\r\n            Выход\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n      <p className={s.text}>{text}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfileNav\r\n","import React, { FC, useState } from 'react'\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks'\r\nimport s from './profile-form.module.css'\r\nimport { useCallback } from 'react';\r\nimport CustomInput from 'components/input/input';\r\nimport { updateUser } from 'services/slices/authSlice';\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ntype TForm = {\r\n    name: string;\r\n    value: string;\r\n}\r\nconst ProfileForm: FC = () => {\r\n    const { name, email } = useAppSelector(store => store.auth.user)\r\n    const [form, setForm] = useState({ name: name, email: email, password: '' })\r\n    const [isEdited, setEdited] = useState(false)\r\n    const onChange = (event: React.ChangeEvent<TForm>) => {\r\n        setForm({ ...form, [event.target.name]: event.target.value });\r\n        if (!isEdited) { setEdited(true) }\r\n    };\r\n    const dispatch = useAppDispatch();\r\n\r\n    const onSubmit = useCallback((event: React.SyntheticEvent) => {\r\n        event.preventDefault()\r\n        if (form.name && form.email) {\r\n            dispatch(updateUser(form))\r\n            setEdited(false)\r\n        }\r\n    }, [dispatch, form]);\r\n\r\n    const onCancel = useCallback(() => {\r\n        setForm({\r\n            name: name,\r\n            email: email,\r\n            password: ''\r\n        }\r\n        );\r\n        setEdited(false);\r\n    }, [name, email]);\r\n\r\n    return (\r\n        <form className={s.user_info} onSubmit={onSubmit}>\r\n            <CustomInput icon={'EditIcon'} name=\"name\" type=\"text\" value={form.name} placeholder=\"Имя\" onChange={onChange} />\r\n            <CustomInput icon={'EditIcon'} name=\"email\" type=\"email\" value={form.email} placeholder=\"Логин\" onChange={onChange} />\r\n            <CustomInput icon={'EditIcon'} name=\"password\" type=\"password\" value={form.password} placeholder=\"Пароль\" onChange={onChange} />\r\n            {isEdited && (\r\n                <span className={s.button}>\r\n                    <Button>Сохранить</Button>\r\n                    <Button onClick={onCancel} size='medium' type='secondary'>Отмена</Button>\r\n                </span>\r\n            )}\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default ProfileForm;","import React, { FC } from 'react'\r\nimport s from './profile.module.css'\r\nimport { useAppSelector } from 'services/hooks'\r\nimport { useLocation, Redirect } from 'react-router-dom'\r\nimport ProfileNav from 'components/profile-nav/profile-nav'\r\nimport ProfileForm from 'components/profile-form/profile-form'\r\nimport { TLocationState } from 'types/types'\r\n\r\nconst Profile: FC = () => {\r\n  const { isAuthorized } = useAppSelector((store) => store.auth)\r\n  const location = useLocation<TLocationState>()\r\n\r\n  if (!isAuthorized) {\r\n    const { from } = location.state || { from: { pathname: '/login' } }\r\n    return <Redirect to={from} />\r\n  }\r\n\r\n  return (\r\n    <section className={s.wrapper}>\r\n      <ProfileNav text='В этом разделе вы можете изменить свои персональные данные' />\r\n      <ProfileForm />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Profile;\r\n","import styles from './price.module.css'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { FC } from 'react'\r\n\r\ninterface IPrice {\r\n  iconType?: 'secondary' | 'primary' | 'error' | 'success'\r\n  size?: 'default' | 'medium'\r\n}\r\n\r\nconst Price: FC<IPrice> = ({ children, iconType = 'primary', size = 'default' }) => {\r\n  return (\r\n    <span className={`${styles.price} ${size === 'default' ? styles.default : styles.medium}`}>\r\n      {children}\r\n      <CurrencyIcon type={iconType} />\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Price\r\n","type TOptions = {\r\n  hour: '2-digit' | 'numeric',\r\n  minute: '2-digit' | 'numeric',\r\n  timeZoneName: 'short' | 'long',\r\n}\r\n\r\nconst formatTime = (date: Date) => {\r\n  const newDate = new Date(date)\r\n  const options: TOptions = {\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    timeZoneName: 'short',\r\n  }\r\n  return newDate.toLocaleString('ru', options)\r\n}\r\n\r\nconst getDiff = (date: Date) => {\r\n  var today = new Date()\r\n  var createdOn = new Date(date)\r\n  var msInDay = 24 * 60 * 60 * 1000\r\n  createdOn.setHours(0, 0, 0, 0)\r\n  today.setHours(0, 0, 0, 0)\r\n\r\n  var diff:number = (+today - +createdOn) / msInDay\r\n\r\n  let result = (diff: number): string => {\r\n    if (diff === 0) {\r\n      return 'Сегодня'\r\n    } else if (diff === 1) {\r\n      return 'Вчера'\r\n    } else if (diff > 1 && diff < 5) {\r\n      return `${diff} дня назад`\r\n    } else {\r\n      return `${diff} дней назад`\r\n    }\r\n  }\r\n  return result(diff)\r\n}\r\n\r\nexport function formatOrderDate(date: Date): string {\r\n  let diff = getDiff(date)\r\n  let time = formatTime(date)\r\n\r\n  return `${diff}, ${time}`\r\n}\r\n","import { TingredientList } from \"types/types\"\r\n\r\ntype TformatData =  (ids: string[], ingredients: TingredientList) => TingredientList\r\n\r\n\r\nexport const formatData: TformatData = (ids, ingredients) => {\r\n  let arr = []\r\n  for (let index = 0; index < ids.length; index++) {\r\n    const element = ids[index]\r\n    const ingr = ingredients.find((item) => item._id === element)\r\n    if (ingr) arr.push(ingr)\r\n  }\r\n  return arr\r\n}\r\n","import { TIngredient, TingredientList } from \"types/types\"\r\n\r\n const calculatePrice = (ingredients: TingredientList): number => {\r\n    return ingredients.reduce(function (prevValue, item) {\r\n         return prevValue + (item.type === 'bun' ? (item as TIngredient).price * 2 : (item as TIngredient).price);\r\n     }, 0);\r\n}\r\nexport default calculatePrice;","import { TOrderStatuses } from \"types/types\";\r\n\r\nexport const ORDER_STATUS: TOrderStatuses = {\r\n    done: 'Выполнен',\r\n    pending: 'Готовится',\r\n    created: 'Создан',\r\n    cancel: 'Отменен'\r\n  };\r\nexport const BASE_URL: string = 'https://4mnesiac.github.io/space-burger/';","import React, { FC } from 'react'\r\nimport styles from './feed-card.module.css'\r\nimport { nanoid } from '@reduxjs/toolkit'\r\nimport Price from 'components/price/price'\r\nimport { Link, useRouteMatch, useLocation } from 'react-router-dom'\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks'\r\nimport { openDetailsModal } from 'services/slices/modalSlice'\r\nimport { formatOrderDate } from 'utils/formatDate'\r\nimport { formatData } from 'utils/formatData'\r\nimport { setOrderToShow } from 'services/slices/orderSlice'\r\nimport { TIngredient, TLocationState, TOrder } from 'types/types'\r\nimport calculatePrice from 'utils/calculatePrice'\r\nimport { ORDER_STATUS } from 'utils/constants'\r\n\r\ninterface IFeedCard {\r\n  item: TOrder\r\n}\r\n\r\nconst renderIngredientsPreviews = (ingredients: Array<TIngredient>) => {\r\n  const previews: Array<JSX.Element> = []\r\n\r\n  for (let index = 0; index < ingredients.length; index++) {\r\n    const ingredient = ingredients[index]\r\n    let others = null\r\n    let zIndex = null\r\n    if (index === 5) {\r\n      others = ingredients.length - 5\r\n    }\r\n    zIndex = ingredients.length - index\r\n    if (others !== null) break\r\n\r\n    previews.push(\r\n      <li key={nanoid()} style={{ zIndex }}>\r\n        <div className={styles.preview}>\r\n          {others && <span className={styles.others}>+{others}</span>}\r\n          <img className={styles.image} src={ingredient.image_mobile} alt={ingredient.name} />\r\n        </div>\r\n      </li>,\r\n    )\r\n  }\r\n  return previews\r\n}\r\n\r\nconst FeedCard: FC<IFeedCard> = ({ item }) => {\r\n  const ingredientList = useAppSelector((store) => store.ingredients.ingredients)\r\n  const { number, createdAt, name, status, ingredients } = item\r\n  const { url } = useRouteMatch()\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation<TLocationState>()\r\n\r\n  // собираем данные ингредиентов по их id\r\n  const formattedIngredients = formatData(ingredients, ingredientList)\r\n\r\n  const handleOpen = () => {\r\n    dispatch(setOrderToShow(item))\r\n    dispatch(openDetailsModal())\r\n  }\r\n\r\n  const color =\r\n    status === 'done'\r\n      ? 'var(--colors-interface-success)'\r\n      : status === 'cancel'\r\n      ? 'var(--colors-interface-error)'\r\n      : 'inherit'\r\n  const date = formatOrderDate(createdAt)\r\n  const price =\r\n    formattedIngredients &&\r\n    ingredients &&\r\n    calculatePrice(formattedIngredients);\r\n  \r\n  return (\r\n    <Link\r\n      to={{ pathname: `${url}/${number}`, state: { from: location.pathname, pushLocation: location } }}\r\n      className={styles.link}\r\n      onClick={handleOpen}\r\n    >\r\n      <article className={styles.card}>\r\n        <header className={styles.header}>\r\n          <span className={styles.id}>#{number}</span>\r\n          <time className={styles.time}>{date}</time>\r\n        </header>\r\n        <h3 className={styles.title}>{name}</h3>\r\n        <p className={styles.status} style={{ color }}>\r\n          {ORDER_STATUS[status]}\r\n        </p>\r\n        <div className={styles.content}>\r\n          <ul className={styles.ingredients}>{renderIngredientsPreviews(formattedIngredients)}</ul>\r\n          <Price>{price}</Price>\r\n        </div>\r\n      </article>\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default FeedCard;\r\n\r\n\r\n","import { FC } from 'react'\r\nimport styles from './scroll-container.module.css'\r\n\r\ninterface IScrollContainer {\r\n  height?: string\r\n  type?: 'default' | 'list'\r\n}\r\n\r\nconst ScrollContainer: FC<IScrollContainer> = ({ children, height, type }) => {\r\n  return (\r\n    <>\r\n      {type === 'list' ? (\r\n        <ul className={styles.scroller} style={{ maxHeight: height }}>\r\n          {children}\r\n        </ul>\r\n      ) : (\r\n        <div className={styles.scroller} style={{ maxHeight: height }}>\r\n          {children}\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ScrollContainer\r\n","import styles from './order-preview.module.css'\r\nimport FeedCard from 'components/feed-card/feed-card'\r\nimport ScrollContainer from 'components/scroll-container/scroll-container'\r\nimport { TallOrdersList, TOrder } from 'types/types'\r\nimport { FC } from 'react'\r\n\r\ninterface IOrderPreview {\r\n  orders: TallOrdersList\r\n  fullscreen: boolean\r\n}\r\nconst OrderPreview: FC<IOrderPreview> = ({ orders, fullscreen }) => {\r\n  const width = fullscreen ? { width: '100%' } : {}\r\n\r\n  return (\r\n    <section className={styles.order_list} style={width}>\r\n      <ScrollContainer type='list'>\r\n        {orders\r\n          .map((item: TOrder, index: number) => (\r\n            <li className={styles.list_item} key={index}>\r\n              <FeedCard item={item} />\r\n            </li>\r\n          ))\r\n          .reverse()}\r\n      </ScrollContainer>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default OrderPreview\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { TOrder } from '../../types/types'\r\n\r\ninterface IinitialState {\r\n  orders: Array<TOrder>,\r\n  total: number,\r\n  totalToday: number,\r\n  wsConnected: boolean,\r\n  hasError: boolean,\r\n}\r\n\r\nexport const initialState: IinitialState = {\r\n  orders: [],\r\n  total: 0,\r\n  totalToday: 0,\r\n  wsConnected: false,\r\n  hasError: false,\r\n}\r\n\r\nconst feedSlice = createSlice({\r\n  name: 'feed',\r\n  initialState,\r\n  reducers: {\r\n    wsConnectionSuccess: (state) => {\r\n      state.wsConnected = true\r\n      state.hasError = false\r\n    },\r\n    wsConnectionError: (state) => {\r\n      state.wsConnected = false\r\n      state.hasError = true\r\n    },\r\n    wsConnectionClosed: (state) => {\r\n      state.wsConnected = false\r\n    },\r\n    wsGetMessage: (state, action) => {\r\n      const { orders, total, totalToday, success } = action.payload\r\n      if (!success) {\r\n        state.hasError = true\r\n        return\r\n      }\r\n      state.orders = orders\r\n      state.total = total\r\n      state.totalToday = totalToday\r\n    },\r\n  },\r\n})\r\n\r\nexport default feedSlice.reducer\r\nexport const { wsConnectionSuccess, wsConnectionError, wsConnectionClosed, wsGetMessage } = feedSlice.actions\r\n","import { wsConnectionSuccess, wsConnectionError, wsConnectionClosed, wsGetMessage } from '../../slices/feedSlice'\r\n\r\nconst wsFeedActions = {\r\n  onOpen: wsConnectionSuccess,\r\n  onError: wsConnectionError,\r\n  onClose: wsConnectionClosed,\r\n  onMessage: wsGetMessage,\r\n}\r\n\r\nexport default wsFeedActions\r\n","import { createSlice } from '@reduxjs/toolkit'\r\n\r\ninterface IinitialState {\r\n  orders: TinitialOrders,\r\n  wsConnected: boolean,\r\n  hasError: boolean,\r\n}\r\ntype TinitialOrders = [];\r\n\r\n\r\nexport const initialState: IinitialState = {\r\n  orders: [],\r\n  wsConnected: false,\r\n  hasError: false,\r\n}\r\n\r\nconst userFeedSlice = createSlice({\r\n  name: 'userFeed',\r\n  initialState,\r\n  reducers: {\r\n    wsConnectionSuccess: (state) => {\r\n      state.wsConnected = true\r\n      state.hasError = false\r\n    },\r\n    wsConnectionError: (state, action) => {\r\n      state.wsConnected = false\r\n      state.hasError = action.payload\r\n    },\r\n    wsConnectionClosed: (state) => {\r\n      state.wsConnected = false\r\n    },\r\n    wsGetMessage: (state, action) => {\r\n      const { orders, success } = action.payload\r\n      if (!success) {\r\n        state.hasError = true\r\n        return\r\n      }\r\n      state.hasError = false\r\n      state.orders = orders\r\n    },\r\n  },\r\n})\r\n\r\nexport default userFeedSlice.reducer\r\nexport const { wsConnectionSuccess, wsConnectionError, wsConnectionClosed, wsGetMessage } = userFeedSlice.actions\r\n","import wsFeedActions from './ws-feed-actions'\r\nimport wsUserFeedActions from './ws-user-feed-actions'\r\nimport wsConnectActions from './ws-connect-actions'\r\n\r\ntype TWsActions = {\r\n  feed: typeof wsFeedActions;\r\n  userFeed: typeof wsUserFeedActions;\r\n  connect: typeof wsConnectActions;\r\n};\r\n\r\nconst wsActions: TWsActions = {\r\n  feed: wsFeedActions,\r\n  userFeed: wsUserFeedActions,\r\n  connect: wsConnectActions,\r\n}\r\n\r\nexport default wsActions;\r\n","import { wsConnectionSuccess, wsConnectionError, wsConnectionClosed, wsGetMessage } from '../../slices/userFeedSlice'\r\n\r\nconst wsUserFeedActions = {\r\n  onOpen: wsConnectionSuccess,\r\n  onError: wsConnectionError,\r\n  onClose: wsConnectionClosed,\r\n  onMessage: wsGetMessage,\r\n}\r\n\r\nexport default wsUserFeedActions\r\n","import { createAction, PayloadActionCreator  } from '@reduxjs/toolkit'\r\n\r\ninterface IWsConnectActions {\r\n  wsConnectionInit: PayloadActionCreator<string>;\r\n  wsConnectionClose: PayloadActionCreator\r\n}\r\n\r\nconst wsConnectActions: IWsConnectActions = {\r\n  wsConnectionInit: createAction('WS_CONNECTION_INIT'),\r\n  wsConnectionClose: createAction('WS_CONNECTION_CLOSE'),\r\n}\r\n\r\nexport default wsConnectActions\r\n","import React, { FC } from 'react';\r\nimport s from './profile-orders.module.css';\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks';\r\nimport { useLocation, Redirect } from 'react-router-dom';\r\nimport ProfileNav from 'components/profile-nav/profile-nav';\r\nimport OrderPreview from 'components/order-preview/order-preview';\r\nimport { useEffect } from 'react';\r\nimport wsActions from 'services/web-socket/wsActions';\r\nimport LoaderSpinner from 'components/loader/loader';\r\nimport { TLocationState } from 'types/types';\r\n\r\nconst ProfileOrders: FC = () => {\r\n    const { isAuthorized } = useAppSelector(store => store.auth)\r\n    const location = useLocation<TLocationState>();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const {\r\n        orders,\r\n        wsConnected,\r\n        hasError,\r\n    } = useAppSelector((state) => state.userFeed);\r\n\r\n    useEffect(() => {\r\n        dispatch(wsActions.connect.wsConnectionInit('userFeed'));\r\n\r\n        return () => {\r\n            dispatch(wsActions.connect.wsConnectionClose());\r\n        };\r\n    }, [dispatch]);\r\n\r\n\r\n\r\n    if (!isAuthorized) {\r\n        console.log('in name ', location.state)\r\n        const { from } = location.state || { from: { pathname: '/' } }\r\n        return (\r\n            <Redirect to={from} />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!wsConnected && !hasError && <LoaderSpinner/>}\r\n            {wsConnected && !hasError && (\r\n                <section className={s.wrapper}>\r\n                    <ProfileNav text='В этом разделе вы можете просмотреть свою историю заказов' />\r\n                    <OrderPreview orders={orders} fullscreen />\r\n                </section>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProfileOrders;","import React, { FC, FormEvent } from 'react';\r\nimport styles from './register.module.css';\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link } from 'react-router-dom';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks';\r\nimport { register } from 'services/slices/authSlice';\r\nimport { useLocation, Redirect, useHistory } from 'react-router-dom';\r\nimport LoaderSpinner from 'components/loader/loader';\r\nimport { TLocationState } from 'types/types';\r\n\r\ntype TForm = {\r\n    name: string;\r\n    email: string;\r\n    password: string;\r\n}\r\nconst RegisterPage: FC = () => {\r\n    const { isAuthorized, isLoading, hasError } = useAppSelector(store => store.auth)\r\n    const location = useLocation<TLocationState>();\r\n    const history = useHistory()\r\n\r\n    const [isVisible, setVisible] = React.useState<boolean>(false)\r\n    const [form, setForm] = React.useState<TForm>({ name: '', email: '', password: '' });\r\n    const dispatch = useAppDispatch();\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n    const onSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        let res = await dispatch(register(form))\r\n        console.log(res)\r\n        if (!isLoading && !hasError) {\r\n            setForm({ name: '', email: '', password: '' })\r\n            return history.replace('/login');\r\n        }\r\n    }\r\n    if (isAuthorized) {\r\n        console.log('in name ', location.state)\r\n        const { from } = location.state || { from: { pathname: '/' } }\r\n        return (\r\n            <Redirect to={from} />\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n        {isLoading && <LoaderSpinner/>}\r\n        {!isLoading && (\r\n        <div className={styles.wrapper}>\r\n            <form className={styles.form} onSubmit={onSubmit}>\r\n                <h1 className={styles.heading}>Регистрация</h1>\r\n                <Input\r\n                    type=\"text\"\r\n                    placeholder=\"Имя\"\r\n                    name=\"name\"\r\n                    value={form.name}\r\n                    onChange={onChange}\r\n                />\r\n\r\n                <Input\r\n                    type=\"email\"\r\n                    placeholder=\"Email\"\r\n                    name=\"email\"\r\n                    value={form.email}\r\n                    onChange={onChange}\r\n                />\r\n\r\n                <Input\r\n                    type={isVisible ? 'text' : \"password\"}\r\n                    placeholder=\"Пароль\"\r\n                    name=\"password\"\r\n                    icon={isVisible ? 'ShowIcon' : 'HideIcon'}\r\n                    value={form.password}\r\n                    onChange={onChange}\r\n                    onIconClick={() => setVisible(!isVisible)}\r\n                />\r\n\r\n                <span className={styles.button}>\r\n                    <Button>Зарегистрироваться</Button>\r\n                </span>\r\n            </form>\r\n            <p className={styles.text}>\r\n                Уже зарегистрированы?&nbsp;\r\n                <Link className={styles.link} to={'/login'}>\r\n                    Войти\r\n                </Link>\r\n            </p>\r\n        </div>\r\n        )}\r\n    </>\r\n    );\r\n}\r\n\r\nexport default RegisterPage;","import React, { FC, FormEvent } from 'react';\r\nimport styles from './reset-password.module.css';\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useAppDispatch, useAppSelector } from 'services/hooks';\r\nimport { resetPassword } from 'services/slices/passwordSlice';\r\nimport { useEffect } from 'react';\r\nimport LoaderSpinner from 'components/loader/loader';\r\n\r\n\r\ntype TForm = {\r\n    password: string;\r\n    token: string;\r\n}\r\nconst ResetPassword: FC = () => {\r\n    const [form, setForm] = React.useState<TForm>({ password: '', token: '' });\r\n    const [isVisible, setVisible] = React.useState<boolean>(false)\r\n    const [error, setError] = React.useState<boolean>(false);\r\n    const dispatch = useAppDispatch();\r\n    const { success, isLoading, hasError, errorMessage } = useAppSelector(store => store.password)\r\n\r\n    useEffect(() => {\r\n        setError(hasError)\r\n    }, [hasError])\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n        setError(false)\r\n    };\r\n    const onSubmit = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        dispatch(resetPassword(form))\r\n        setForm({ password: '', token: '' })\r\n    }\r\n\r\n    if (success) {\r\n        localStorage.removeItem('emailConfirmationSended')\r\n        return (<Redirect to={{ pathname: '/login' }} />)\r\n    }\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            {isLoading && <LoaderSpinner />}\r\n            <form className={styles.form} onSubmit={onSubmit}>\r\n                <h1 className={styles.heading}>Восстановление пароля</h1>\r\n\r\n                <Input\r\n                    type={isVisible ? 'text' : \"password\"}\r\n                    placeholder=\"Введите новый пароль\"\r\n                    name=\"password\"\r\n                    icon={isVisible ? 'ShowIcon' : 'HideIcon'}\r\n                    value={form.password}\r\n                    onChange={onChange}\r\n                    onIconClick={() => setVisible(!isVisible)}\r\n                    error={error}\r\n                    success={success}\r\n                />\r\n                <Input\r\n                    type=\"text\"\r\n                    placeholder=\"Введите код из письма\"\r\n                    name=\"token\"\r\n                    value={form.token}\r\n                    onChange={onChange}\r\n                    error={error}\r\n                    success={success}\r\n                />\r\n                {error && <span className={styles.error}>{errorMessage}</span>}\r\n                <span className={styles.button}>\r\n                    <Button>Восстановить</Button>\r\n                </span>\r\n            </form>\r\n            <p className={styles.text}>\r\n                Вспомнили пароль?&nbsp;\r\n                <Link className={styles.link} to={'/login'}>\r\n                    Войти\r\n                </Link>\r\n            </p>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default ResetPassword;","import React, { FC } from 'react'\r\nimport navItemStyles from './nav-item.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\ntype TNavItemProps = {\r\n  text: string\r\n  link: string\r\n}\r\n\r\nconst NavItem: FC<TNavItemProps> = ({ text, link, children }) => {\r\n  return (\r\n    <NavLink to={link} className={navItemStyles.link} activeClassName={navItemStyles.active} exact>\r\n      <span className={navItemStyles.icon}>{children}</span>\r\n      <p className={navItemStyles.text}>{text}</p>\r\n    </NavLink>\r\n  )\r\n}\r\nexport default NavItem\r\n","import React, { FC } from 'react'\r\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { NavItem } from '../nav-item'\r\nimport navbarStyles from './navbar.module.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { useAppSelector } from 'services/hooks'\r\n\r\nconst NavBar: FC = () => {\r\n  // const localName = localStorage.getItem('userName');\r\n  const name = useAppSelector((store) => store.auth.user.name)\r\n  return (\r\n    <nav className={navbarStyles.navbar}>\r\n      <ul className={navbarStyles.nav_menu}>\r\n        <li>\r\n          <div className={navbarStyles.item_wrapper}>\r\n            <NavItem text='Конструктор' link={'/'}>\r\n              <BurgerIcon type='primary' />\r\n            </NavItem>\r\n            <NavItem text='Лента заказов' link={'/feed'}>\r\n              <ListIcon type='primary' />\r\n            </NavItem>\r\n          </div>\r\n        </li>\r\n        <li className={navbarStyles.logo}>\r\n          <Link to={'/'} className={navbarStyles.link}>\r\n            <Logo />\r\n          </Link>\r\n        </li>\r\n        <div className={navbarStyles.item_wrapper}>\r\n          <li>\r\n            <NavItem text={name ? name : 'Личный кабинет'} link='/profile'>\r\n              <ProfileIcon type='primary' />\r\n            </NavItem>\r\n          </li>\r\n        </div>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\nexport default NavBar\r\n","import React, { FC } from 'react'\r\nimport { NavBar } from './parts'\r\nimport headerStyles from './app-header.module.css'\r\n\r\nconst AppHeader: FC = () => {\r\n  return (\r\n    <header className={headerStyles.header}>\r\n      <NavBar />\r\n    </header>\r\n  )\r\n}\r\nexport default AppHeader\r\n","import { Redirect, Route, useLocation } from 'react-router-dom';\r\nimport { TLocationState } from \"types/types\";\r\nimport { useAppSelector } from 'services/hooks';\r\nimport { FC } from \"react\";\r\nimport { TProtectedHOC } from 'types/types';\r\n\r\n\r\nconst ProtectedRouteWithReset: FC<TProtectedHOC> = ({ children, ...rest }) => {\r\n    const { isAuthorized } = useAppSelector(store => store.auth)\r\n    const emailConfirmationSended = localStorage.getItem('emailConfirmationSended')\r\n    const location = useLocation<TLocationState>();\r\n    const { from } = location.state || { from: { pathname: '/' } }\r\n\r\n    return (\r\n        <Route {...rest}\r\n            render={(location) =>\r\n                !isAuthorized && emailConfirmationSended === 'true' ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect to={from} />\r\n                )\r\n            }\r\n        />\r\n    )\r\n}\r\nexport default ProtectedRouteWithReset\r\n","import { useAppSelector } from 'services/hooks';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport {FC} from 'react';\r\nimport { TProtectedHOC } from 'types/types';\r\n// роут только для авторизованных пользователей\r\n\r\nconst ProtectedRoute: FC<TProtectedHOC> = ({ children, ...rest }) => {\r\n    const { isAuthorized } = useAppSelector(store => store.auth);\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) => {\r\n                return isAuthorized ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect to={{\r\n                        pathname: '/login',\r\n                        state: { from: location }\r\n                    }} />\r\n                );\r\n            }\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n\r\n","import React, { FC } from 'react';\r\nimport styles from './order-dashboard.module.css';\r\nimport { useAppSelector } from 'services/hooks';\r\nimport LoaderSpinner from 'components/loader/loader';\r\n\r\n\r\n\r\nexport const OrderDashboard: FC = () => {\r\n    const {\r\n        orders,\r\n        total,\r\n        totalToday,\r\n    } = useAppSelector(state => state.feed);\r\n\r\n    const readyOrders = orders && orders.filter(item => item.status === \"done\").slice(0,21);\r\n    const inProgressOrders = orders && orders.filter(item => item.status === 'pending').slice(0,21);\r\n\r\n    return (\r\n        <section className={styles.dashboard}>\r\n            {!orders ? (<LoaderSpinner/>) : (\r\n                <article className={styles.orders}>\r\n                <div className={styles.content}>\r\n                    <div className={styles.content_item}>\r\n                        <header className={styles.row__title}>Готовы: </header>\r\n                        <ul className={styles.list}>\r\n                            {readyOrders.map((item) => (\r\n                                <li key={item._id} className={styles.ready}>{item.number}</li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                    <div className={styles.content_item}>\r\n                        <header className={styles.row__title}>В работе: </header>\r\n                        <ul className={styles.list}>\r\n                            {inProgressOrders.map(item => (\r\n                                <li key={item._id} className={styles.inprogress}>{item.number}</li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div className={styles.row}>\r\n                    <header className={styles.row__title}>Выполнено за все время:</header>\r\n                    <p className={styles.row__content}>{total}</p>\r\n                </div>\r\n                <div className={styles.row}>\r\n                    <header className={styles.row__title}>Выполнено за сегодня:</header>\r\n                    <p className={styles.row__content}>{totalToday}</p>\r\n                </div>\r\n            </article>\r\n            )}\r\n        </section>\r\n\r\n    );\r\n};\r\n","import React, { FC } from 'react'\r\nimport styles from './feed.module.css'\r\nimport FeedCard from '../feed-card/feed-card'\r\nimport { OrderDashboard } from 'components/order-dashboard/order-dashboard'\r\nimport ScrollContainer from 'components/scroll-container/scroll-container'\r\nimport { useEffect } from 'react'\r\nimport { useAppSelector, useAppDispatch } from 'services/hooks'\r\nimport wsActions from 'services/web-socket/wsActions'\r\nimport LoaderSpinner from 'components/loader/loader'\r\n\r\nconst FeedPage: FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { orders, wsConnected, hasError } = useAppSelector((state) => state.feed)\r\n\r\n  useEffect(() => {\r\n    dispatch(wsActions.connect.wsConnectionInit('feed'))\r\n\r\n    return () => {\r\n      dispatch(wsActions.connect.wsConnectionClose())\r\n    }\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <>\r\n      {!wsConnected && !hasError && <LoaderSpinner />}\r\n      {wsConnected && !hasError && (\r\n        <>\r\n          <section className={styles.wrapper}>\r\n            <section className={styles.order_list}>\r\n              <h1 className={styles.heading}>Лента заказов</h1>\r\n              <ScrollContainer type='list' height='680px'>\r\n                {orders.map((item, index) => (\r\n                  <li className={styles.list_item} key={index}>\r\n                    <FeedCard item={item} />\r\n                  </li>\r\n                ))}\r\n              </ScrollContainer>\r\n            </section>\r\n\r\n            <OrderDashboard />\r\n          </section>\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\nexport default FeedPage\r\n","import styles from './order-title.module.css'\r\nimport { TOrderStatusCode } from 'types/types'\r\nimport { FC } from 'react'\r\nimport { ORDER_STATUS } from 'utils/constants'\r\n\r\ninterface IOrderTitle {\r\n  name: string\r\n  status: TOrderStatusCode\r\n}\r\n\r\nconst OrderTitle: FC<IOrderTitle> = ({ name, status }) => {\r\n  return (\r\n    <section className={styles.header}>\r\n      <h2 className={styles.title}>{name}</h2>\r\n      <p className={styles.status}>{ORDER_STATUS[status]}</p>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default OrderTitle\r\n","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport styles from './order-item.module.css'\r\nimport { TIngredient } from 'types/types'\r\nimport { FC } from 'react'\r\n\r\ninterface IOrderItem {\r\n  ingredient: TIngredient\r\n  price: number\r\n}\r\n\r\nconst OrderItem: FC<IOrderItem> = ({ ingredient, price }) => {\r\n  return (\r\n    <article className={styles.ingredient}>\r\n      <div className={styles.ingredient}>\r\n        <picture className={styles.picture}>\r\n          <img src={ingredient.image_mobile} alt={ingredient.name} />\r\n        </picture>\r\n      </div>\r\n      <h4 className={styles.ingredient_name}>{ingredient.name}</h4>\r\n      <span className={styles.price}>\r\n        {ingredient && ingredient.type === 'bun' ? 2 : 1}&nbsp;x&nbsp;{price}\r\n        <CurrencyIcon type='primary' />\r\n      </span>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default OrderItem\r\n","import Price from 'components/price/price'\r\nimport styles from './order-footer.module.css'\r\nimport { FC } from 'react'\r\n\r\ninterface IOrderFooter {\r\n  datetime: string\r\n  price: number\r\n}\r\n\r\nconst OrderFooter: FC<IOrderFooter> = ({ datetime, price }) => {\r\n  return (\r\n    <footer className={styles.footer}>\r\n      <p className={styles.wrapper}>\r\n        <time dateTime={datetime} className={styles.time}>\r\n          {datetime}\r\n        </time>\r\n      </p>\r\n      <Price>{price}</Price>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default OrderFooter\r\n","import ScrollContainer from 'components/scroll-container/scroll-container'\r\nimport styles from './order-content.module.css'\r\nimport { OrderItem } from '../index'\r\nimport { TingredientList } from 'types/types'\r\nimport { FC } from 'react'\r\n\r\ninterface IOrderContent {\r\n  ingredients: TingredientList\r\n}\r\n\r\nconst OrderContent: FC<IOrderContent> = ({ ingredients }) => {\r\n  // подсчет количества\r\n  // const count = ingredients.reduce((acc, el) => {\r\n  //     return acc[el.name] ? acc[el.name]++ : acc[el.name] = 1, acc;\r\n  // }, {})\r\n\r\n  return (\r\n    <>\r\n      <h3 className={styles.ingredients_title}>Состав:</h3>\r\n      <ScrollContainer height='300px'>\r\n        <ul className={styles.list}>\r\n          {ingredients.map((item, index) => (\r\n            <li className={styles.item} key={index}>\r\n              <OrderItem ingredient={item} price={item.price} />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </ScrollContainer>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default OrderContent\r\n","import React, { FC, useState } from 'react'\r\nimport styles from './order-info.module.css'\r\nimport { useAppParams, useAppDispatch, useAppSelector } from 'services/hooks'\r\nimport { OrderTitle, OrderFooter, OrderContent } from './parts'\r\nimport { formatOrderDate } from 'utils/formatDate'\r\n\r\nimport LoaderSpinner from 'components/loader/loader'\r\nimport { getOrderByIdApi } from 'services/api'\r\nimport { TingredientList, TOrder } from 'types/types'\r\nimport calculatePrice from 'utils/calculatePrice'\r\n\r\nconst OrderInfo: FC = () => {\r\n  const [order, setOrder] = useState<TOrder | undefined>()\r\n  const dispatch = useAppDispatch()\r\n  const { id } = useAppParams()\r\n  const { ingredients, isLoading } = useAppSelector((store) => store.ingredients)\r\n\r\n  const orderIngredients =\r\n    ingredients && order && order.ingredients.map((id) => ingredients.find((item) => item._id === id))\r\n  const date = order && formatOrderDate(order.createdAt)\r\n\r\n  const orderPrice =\r\n    orderIngredients &&\r\n    ingredients &&\r\n    calculatePrice(orderIngredients);\r\n\r\n\r\n  React.useEffect(() => {\r\n    // dispatch(getIngredients())\r\n    getOrderByIdApi(id)\r\n      .then((res) => {\r\n        setOrder(res.orders[0])\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }, [id, dispatch])\r\n\r\n  return (\r\n    <>\r\n      {!isLoading && order ? (\r\n        <article className={styles.card}>\r\n          <p className={styles.id}>#{order.number}</p>\r\n          <OrderTitle name={order.name} status={order.status} />\r\n          <OrderContent ingredients={(orderIngredients as TingredientList)} />\r\n          <OrderFooter datetime={(date as string)} price={(orderPrice as number)} />\r\n        </article>\r\n      ) : (\r\n        <LoaderSpinner />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default OrderInfo\r\n","import { useAppSelector } from 'services/hooks';\r\nimport { Redirect, Route, useLocation } from 'react-router-dom';\r\nimport { TLocationState } from \"types/types\";\r\nimport { FC } from \"react\";\r\nimport { TProtectedHOC } from 'types/types';\r\n// роут закрыт для авторизованных пользователей\r\n\r\n const ProtectedAuthorizedRoute: FC<TProtectedHOC> = ({ children, ...rest }) => {\r\n  const { isAuthorized } = useAppSelector(store => store.auth);\r\n  const location = useLocation<TLocationState>();\r\n  const { from } = location.state || { from: { pathname: '/' } }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() => {\r\n        return !isAuthorized ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={from} />\r\n        )\r\n      }\r\n      }\r\n    />\r\n  );\r\n}\r\nexport default ProtectedAuthorizedRoute\r\n","import React, { FC } from 'react'\r\nimport Modal from '../modal/modal'\r\nimport { useAppSelector } from 'services/hooks'\r\nimport styles from './order-item-details.module.css'\r\nimport { formatOrderDate } from 'utils/formatDate'\r\nimport { OrderContent, OrderFooter, OrderTitle } from 'components/order-info/parts'\r\nimport { TingredientList, TOrder } from 'types/types'\r\nimport calculatePrice from 'utils/calculatePrice'\r\n\r\ninterface IOrderItemDetails {\r\n  onClose: () => void\r\n}\r\nconst OrderItemDetails: FC<IOrderItemDetails> = ({ onClose }) => {\r\n  const { ingredients } = useAppSelector((store) => store.ingredients)\r\n  const { orderToShow } = useAppSelector((store) => store.order)\r\n  const { name, status, number, createdAt } = orderToShow as TOrder\r\n\r\n  const orderIngredients =\r\n    ingredients &&\r\n    orderToShow &&\r\n    (orderToShow as TOrder).ingredients.map((id) => ingredients.find((item) => item._id === id))\r\n  const date = orderToShow && formatOrderDate(createdAt)\r\n\r\n  const orderPrice =\r\n    orderIngredients &&\r\n    ingredients &&\r\n    calculatePrice(orderIngredients);\r\n\r\n  return (\r\n    <Modal name='Details' title={`#${number}`} onClose={onClose} titleType='id'>\r\n      <article className={styles.card}>\r\n        <OrderTitle name={name} status={status} />\r\n        <OrderContent ingredients={(orderIngredients as TingredientList)} />\r\n        <OrderFooter datetime={(date as string)} price={(orderPrice as number)} />\r\n      </article>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default OrderItemDetails\r\n","import React, { FC, useCallback } from 'react'\r\nimport {\r\n  IngredientPage,\r\n  ProfileOrders,\r\n  HomePage,\r\n  AuthPage,\r\n  RegisterPage,\r\n  ForgotPassword,\r\n  ResetPassword,\r\n  Profile,\r\n  NotFound404,\r\n} from '../../pages'\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom'\r\nimport AppHeader from 'components/app-header/app-header'\r\nimport { useEffect } from 'react'\r\nimport { getUser } from '../../services/slices/authSlice'\r\nimport ProtectedRouteWithReset from 'components/protected-reset-password/protected-reset-password'\r\nimport ProtectedRoute from '../protected-route/protected-route'\r\nimport Modal from 'components/modal/modal'\r\nimport IngredientDetails from 'components/ingredient-details/ingredient-details'\r\nimport { getIngredients, resetIngredientToShow } from 'services/slices/ingredientsSlice'\r\nimport FeedPage from 'components/feed/feed'\r\nimport OrderInfo from 'components/order-info/order-info'\r\nimport ProtectedAuthorizedRoute from 'components/protected-authorized-route/protected-authorized-route'\r\nimport LoaderSpinner from 'components/loader/loader'\r\nimport { closeDetailsModal } from 'services/slices/modalSlice'\r\nimport OrderItemDetails from 'components/order-item-details/order-item-details'\r\nimport { useAppSelector, useAppDispatch } from '../../services/hooks'\r\nimport { TLocationState } from 'types/types'\r\n\r\nexport const API = 'https://norma.nomoreparties.space/api'\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useAppDispatch()\r\n  const location = useLocation<TLocationState>()\r\n  const history = useHistory()\r\n  const { isLoading } = useAppSelector((store) => store.auth)\r\n\r\n  const isPush = history.action === 'PUSH'\r\n  let pushLocation = isPush && location.state && location.state.pushLocation\r\n\r\n  useEffect(() => {\r\n    dispatch(getIngredients())\r\n    dispatch(getUser())\r\n  }, [dispatch])\r\n\r\n  const closeModal = useCallback(() => {\r\n    dispatch(closeDetailsModal())\r\n    history.goBack()\r\n    dispatch(resetIngredientToShow())\r\n    // dispatch(resetOrderToShow())\r\n  }, [dispatch, history])\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <LoaderSpinner type='default' />}\r\n      <AppHeader />\r\n      <Switch location={pushLocation || location}>\r\n        <Route path='/' exact>\r\n          <HomePage />\r\n        </Route>\r\n        <Route path='/feed' exact>\r\n          <FeedPage />\r\n        </Route>\r\n        <Route path='/feed/:id' exact>\r\n          <OrderInfo />\r\n        </Route>\r\n\r\n        <ProtectedAuthorizedRoute path='/login' exact>\r\n          <AuthPage />\r\n        </ProtectedAuthorizedRoute>\r\n        <ProtectedAuthorizedRoute path='/register' exact>\r\n          <RegisterPage />\r\n        </ProtectedAuthorizedRoute>\r\n        <ProtectedAuthorizedRoute path='/forgot-password' exact>\r\n          <ForgotPassword />\r\n        </ProtectedAuthorizedRoute>\r\n\r\n        <ProtectedRouteWithReset path='/reset-password' exact>\r\n          <ResetPassword />\r\n        </ProtectedRouteWithReset>\r\n\r\n        <ProtectedRoute path='/profile' exact>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile/orders' exact>\r\n          <ProfileOrders />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path='/profile/orders/:id' exact>\r\n          <OrderInfo />\r\n        </ProtectedRoute>\r\n\r\n        <Route path='/ingredients/:id' exact>\r\n          <IngredientPage />\r\n        </Route>\r\n        <Route>\r\n          <NotFound404 />\r\n        </Route>\r\n      </Switch>\r\n      {pushLocation && (\r\n        <Route path='/ingredients/:id'>\r\n          <Modal name='Details' title='Детали ингредиента' onClose={closeModal}>\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n      {pushLocation && (\r\n        <Route path='/feed/:id'>\r\n          <OrderItemDetails onClose={closeModal} />\r\n        </Route>\r\n      )}\r\n      {pushLocation && (\r\n        <Route path='/profile/orders/:id'>\r\n          <OrderItemDetails onClose={closeModal} />\r\n        </Route>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import ingredientsReducer from './ingredientsSlice'\r\nimport orderReducer from './orderSlice'\r\nimport cartReducer from './cartSlice'\r\nimport modalReducer from './modalSlice'\r\nimport authReducer from './authSlice'\r\nimport passwordReducer from './passwordSlice'\r\nimport feedReducer from './feedSlice'\r\nimport userFeedReducer from './userFeedSlice'\r\n\r\nconst rootReducer = {\r\n  ingredients: ingredientsReducer,\r\n  order: orderReducer,\r\n  cart: cartReducer,\r\n  modal: modalReducer,\r\n  auth: authReducer,\r\n  password: passwordReducer,\r\n  feed: feedReducer,\r\n  userFeed: userFeedReducer,\r\n}\r\n\r\nexport default rootReducer\r\n","import { getCookie } from '../../../utils/cookie'\r\n\r\ninterface IWsServices {\r\n  feed: () => WebSocket;\r\n  userFeed: () => WebSocket;\r\n}\r\n\r\nconst wsServices: IWsServices = {\r\n  feed: () => new WebSocket('wss://norma.nomoreparties.space/orders/all'),\r\n  userFeed: () => new WebSocket(`wss://norma.nomoreparties.space/orders?token=${getCookie('token').split(' ')[1]}`),\r\n}\r\n\r\nexport default wsServices\r\n","import wsServices from '../wsServices/wsServices'\r\nimport wsActions from '../wsActions'\r\nimport { refreshExpiredTokenApi } from 'services/api'\r\nimport { setCookie } from 'utils/cookie'\r\nimport { Dispatch, AnyAction, MiddlewareAPI } from 'redux'\r\n\r\n\r\nconst socketMiddleware = () => {\r\n  return (store: MiddlewareAPI) => {\r\n    let socket: WebSocket | null = null\r\n    let socketName: string = ''\r\n    \r\n    return (next: Dispatch<AnyAction>) => (action:AnyAction) => {\r\n      const { dispatch } = store\r\n      const { type, payload } = action\r\n      if (type === wsActions.connect.wsConnectionInit.toString()) {\r\n        socketName = payload\r\n        socket = wsServices[payload]()\r\n      }\r\n\r\n      if (type === wsActions.connect.wsConnectionClose.toString()) {\r\n        socket.close()\r\n      }\r\n\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch(wsActions[socketName].onOpen(event.type))\r\n        }\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event\r\n          const parsedData = JSON.parse(data)\r\n          const { success, ...restParsedData } = parsedData\r\n\r\n          if (restParsedData.message && restParsedData.message === 'Invalid or missed token') {\r\n            refreshExpiredTokenApi().then((res) => {\r\n              setCookie('token', res.accessToken, {path: '/'})\r\n              localStorage.setItem('token', res.refreshToken)\r\n\r\n              dispatch(wsActions.connect.wsConnectionInit(payload))\r\n            })\r\n          } else {\r\n            dispatch(wsActions[socketName].onMessage(parsedData))\r\n          }\r\n        }\r\n        socket.onerror = (event) => {\r\n          dispatch(wsActions[socketName].onError(event.type && true))\r\n        }\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch(wsActions[socketName].onClose(event.type))\r\n        }\r\n      }\r\n      next(action)\r\n    }\r\n  }\r\n}\r\n\r\nexport default socketMiddleware\r\n","import { configureStore } from '@reduxjs/toolkit'\r\nimport rootReducer from './slices'\r\nimport socketMiddleware from './web-socket/middleware/feed-socket-middleware'\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(socketMiddleware()),\r\n  devTools: true,\r\n})\r\n\r\nexport default store;\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport { Provider } from 'react-redux';\r\nimport store  from 'services/store';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport {BASE_URL} from './utils/constants'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n  <Router basename={BASE_URL}>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"auth_wrapper__ZtN56\",\"form\":\"auth_form__1lXqw mb-20\",\"heading\":\"auth_heading__2wIVj mb-6\",\"input_container\":\"auth_input_container__2jFuI pl-6 pr-6 mb-6\",\"input_control\":\"auth_input_control__5AchI pl-6\",\"button\":\"auth_button__BOkYQ\",\"text\":\"auth_text__3c9Lh text text_type_main-default mb-4\",\"link\":\"auth_link__1SeCN\",\"error\":\"auth_error__DEarE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"reset-password_wrapper__3GHrk\",\"form\":\"reset-password_form__30ulD mb-20\",\"heading\":\"reset-password_heading__36KvP mb-6\",\"button\":\"reset-password_button__1wsdj\",\"text\":\"reset-password_text__H3xJP text text_type_main-default mb-4\",\"link\":\"reset-password_link__3jm6w\",\"error\":\"reset-password_error__1ZxWG text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_number\":\"order-details_order_number__3uQJl text text_type_digits-large mt-9 mb-8\",\"subtitle\":\"order-details_subtitle__1Dv7W text text_type_main-medium\",\"text\":\"order-details_text__cEOZj text text_type_main-default mb-2\",\"text_secondary\":\"order-details_text_secondary__2t5J8 pb-30\",\"icon\":\"order-details_icon__33Q9e mt-15 mb-15\",\"close\":\"order-details_close__34J5V\",\"name\":\"order-details_name__1sGdA text text_type_main-default mb-2 mt-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"picture\":\"card_picture__3KLvI ml-4 mr-4\",\"image\":\"card_image__3FQvp\",\"item\":\"card_item__2ugTB ml-6 mb-10\",\"price\":\"card_price__33wDt mt-1 mb-1 text_type_digits-medium\",\"text\":\"card_text__CRb1Z text text_type_main-default\",\"card\":\"card_card__VaNOE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"navbar_navbar__3VrtK\",\"nav_menu\":\"navbar_nav_menu__1AAUh\",\"logo\":\"navbar_logo__wVl5E\",\"item_wrapper\":\"navbar_item_wrapper__DUszW\",\"link\":\"navbar_link__2UijB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__2TVGy\",\"container\":\"modal_container__k1tel\",\"heading\":\"modal_heading__YLWje text text_type_main-large pt-10 pl-10\",\"heading_type_id\":\"modal_heading_type_id__ezqvY text_type_digits-default text pt-10 pl-10\",\"close\":\"modal_close__3xgR4 mt-15 mr-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"order-item_ingredient__iLSJ_\",\"ingredient_name\":\"order-item_ingredient_name__1jm0M text_type_main-default text ml-4\",\"price\":\"order-item_price__1_II6 text text_type_digits-default\",\"picture\":\"order-item_picture__1hl4i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"ingredient-details_title__1H6N7 text text_type_main-medium mt-4 mb-8\",\"picture\":\"ingredient-details_picture__1Fave ml-4 mr-4\",\"detail\":\"ingredient-details_detail__uBH5J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"not-found-404_wrapper__3gxr_\",\"text\":\"not-found-404_text__2t-KY text text_type_main-medium mt-4\",\"title\":\"not-found-404_title__1WXyk text text_type_digits-large\",\"link\":\"not-found-404_link__2glP3 text text_type_main-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"nav-item_link__3464V ml-2 mt-4 mb-4 pt-4 pb-4 pr-5 pl-5 text text_type_main-default\",\"active\":\"nav-item_active__hQQRU\",\"icon\":\"nav-item_icon__1dpCG mr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"feed_wrapper__23L8J\",\"order_list\":\"feed_order_list__gDp30 pr-2\",\"list_item\":\"feed_list_item__GhyNm mb-4\",\"heading\":\"feed_heading__3SVxc\",\"ingredient\":\"feed_ingredient__21BUS\",\"others\":\"feed_others__3nest text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__zQczy\",\"overlay_opened\":\"modal-overlay_overlay_opened__1nnD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text\":\"nutrition-item_text__2VBhw text text_type_main-default\",\"nutrition_item\":\"nutrition-item_nutrition_item__1V9QT ml-5\",\"value\":\"nutrition-item_value__3x2V2 mt-2 text text_type_digits-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"price_price__1OGSW text\",\"default\":\"price_default__3ZTDJ text_type_digits-default\",\"medium\":\"price_medium__3F3HZ text_type_digits-medium\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"order-title_header__3UJCn pb-15 pt-5\",\"title\":\"order-title_title__1cTp7 text text_type_main-medium mb-3\",\"status\":\"order-title_status__x0ARq text text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"order-footer_footer__1YpGF pt-10 pb-10\",\"wrapper\":\"order-footer_wrapper__Up1Wz text\",\"time\":\"order-footer_time__CG22Q text_type_main-default\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients_title\":\"order-content_ingredients_title__UkZ2n text text_type_main-medium mb-6\",\"list\":\"order-content_list__1nt3p list-reset pr-6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__382E2 ml-5 pt-25\",\"scroller\":\"burger-constructor_scroller__UGxHP mb-4 mt-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item_container\":\"ingredient_item_container__1rzXZ pb-2 pt-2\",\"list_item\":\"ingredient_list_item__1nMDy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order_order__2JtIh mt-10 mb-10 pl-4 pr-4\",\"price\":\"order_price__3w2Hm text text_type_digits-medium mr-10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bun\":\"bun_bun__2xRKp pl-8 pr-6\",\"bun_empty\":\"bun_bun_empty__1DDxd pl-8 pr-6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__lalje mr-5\",\"title\":\"burger-ingredients_title__2Jhvr text_type_main-large mt-10 mb-5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"menu-item_title__1h3RY text text_type_main-medium mb-6\",\"items\":\"menu-item_items__raPFB ml-4 mr-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient-page_wrapper__2d3Z_ pt-20\",\"title\":\"ingredient-page_title__rLCPc text_type_main-large text\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"profile-form_button__3rcLY\",\"user_info\":\"profile-form_user_info__FHM_t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order_list\":\"order-preview_order_list__3yNXb pr-2\",\"list_item\":\"order-preview_list_item__BhKX7 mb-4\",\"link\":\"order-preview_link__qxicg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroller\":\"scroll-container_scroller__2lyE8 pr-2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-info_card__nXOoS\",\"id\":\"order-info_id__1c6uE text_type_digits-default text mb-10 mt-20\",\"item\":\"order-info_item__zM-lt mb-4\"};"],"sourceRoot":""}