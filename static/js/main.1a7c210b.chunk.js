(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{121:function(e,t,r){e.exports={main_container:"ingredients-list_main_container__1YZA9 pl-4 pr-4"}},122:function(e,t,r){e.exports={overlay:"loader_overlay__1vWAi"}},123:function(e,t,r){e.exports={scroller:"menu_scroller__3mPM4"}},124:function(e,t,r){e.exports={tab_container:"tabs_tab_container__11qQl mb-10"}},125:function(e,t,r){e.exports={wrapper:"home_wrapper__1MXcy"}},126:function(e,t,r){e.exports={nutrition:"nutrition-list_nutrition__1tfzN mb-15"}},127:function(e,t,r){e.exports={wrapper:"profile_wrapper__z1dCt pt-30"}},128:function(e,t,r){e.exports={wrapper:"profile-orders_wrapper__3ovSw pt-30"}},129:function(e,t,r){e.exports={header:"app-header_header__1gLfD"}},130:function(e,t,r){e.exports={card:"order-item-details_card__2m0v6"}},137:function(e,t,r){},14:function(e,t,r){e.exports={dashboard:"order-dashboard_dashboard__rbmci ml-15 pr-2 pt-25",content:"order-dashboard_content__2IFIg mb-15",content_item:"order-dashboard_content_item__1alGy pr-9",list:"order-dashboard_list__2Yt0N text text_type_digits-default mt-6",title:"order-dashboard_title__2i11l pb-6",row:"order-dashboard_row__3YZB2 mb-15",row__title:"order-dashboard_row__title__23Tk1 text text_type_main-medium",row__content:"order-dashboard_row__content__3l0r_ text text_type_digits-large",ready:"order-dashboard_ready__3iwqF",inprogress:"order-dashboard_inprogress__1CSOf mt-2"}},17:function(e,t,r){e.exports={wrapper:"register_wrapper__3tb37",form:"register_form__2WYQF mb-20",heading:"register_heading__rfXfv mb-6",button:"register_button__3GYdV",text:"register_text__2bf0X text text_type_main-default mb-4",link:"register_link__t2YSS"}},21:function(e,t,r){e.exports={navmenu:"profile-nav_navmenu__3r1Ye mr-15",user_info:"profile-nav_user_info__1v50h ml-15",menu:"profile-nav_menu__36Kkf text text_type_main-medium mb-20",link:"profile-nav_link__30Dbl",active:"profile-nav_active__zWfpN",menu_item:"profile-nav_menu_item__3F96_",text:"profile-nav_text__32Bzr text text_type_main-default"}},22:function(e,t,r){e.exports={card:"feed-card_card__5XmzV mt-4 p-6",header:"feed-card_header__1STaG mb-6",id:"feed-card_id__11HbA text_type_digits-default",time:"feed-card_time__6j1XN text_type_main-default",title:"feed-card_title__OoJuw text_type_main-medium text mb-2",status:"feed-card_status__39hIC text text_type_main-default mb-6",content:"feed-card_content__2abn-",ingredients:"feed-card_ingredients__1X91f list-reset",price:"feed-card_price__WPVZM text text_type_digits-default",others:"feed-card_others__4hqmG text_type_main-default",preview:"feed-card_preview__oIP-X",image:"feed-card_image__3kSUX",link:"feed-card_link__1ue-2"}},237:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(37),c=r.n(s),i=(r(137),r(27)),o=r(12),u=r(7),l=r(28),d=r.n(l),p=r(4),m=r(13),j=r(6),f=r(2),b=r.n(f),h=r(8),x=r(5);function _(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function O(e,t,r){var n=(r=r||{}).expires;if("number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=r.expires=a}n&&n.toUTCString&&(r.expires=n.toUTCString());var s=e+"="+(t=encodeURIComponent(t));for(var c in r){s+="; "+c;var i=r[c];!0!==i&&(s+="="+i)}document.cookie=s}var g,v,w,y,C,N=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},k=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n,a,s,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:null,n=localStorage.getItem("token"),e.prev=2,e.next=5,fetch("".concat(Tn,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})});case 5:return a=e.sent,e.next=8,N(a);case 8:if(!(s=e.sent)||!s.success){e.next=19;break}if(s.refreshToken===n){e.next=18;break}if(O("token",s.accessToken,{path:"/"}),localStorage.setItem("token",s.refreshToken),console.log("refresh success!"),!t){e.next=18;break}return e.next=17,t(r);case 17:return e.abrupt("return",e.sent);case 18:return e.abrupt("return",s);case 19:throw new Error(s.message);case 22:e.prev=22,e.t0=e.catch(2),console.log("Refresh error: "+e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",authorization:_("token")}});case 3:return t=e.sent,e.next=6,N(t);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,Promise.reject(e.t0);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("token")})});case 3:return t=e.sent,e.next=6,N(t);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n,a,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.email,a=t.password,e.prev=1,e.next=4,fetch("".concat(Tn,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:_("token")},body:JSON.stringify({name:r,email:n,password:a})});case 4:return s=e.sent,e.next=7,N(s);case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(1),console.log("Update user failed: ",e.t0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,N(r);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,N(r);case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 3:return r=e.sent,e.next=6,N(r);case 6:if(!(n=e.sent)||!n.success){e.next=11;break}return e.abrupt("return",n);case 11:return e.abrupt("return",Promise.reject(n.message));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.password,n=t.token,e.prev=1,e.next=4,fetch("".concat(Tn,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:r,token:n})});case 4:return a=e.sent,e.next=7,N(a);case 7:if(!(s=e.sent)||!s.success){e.next=12;break}return e.abrupt("return",s);case 12:return e.abrupt("return",Promise.reject(s.message));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(h.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/orders/all"),{method:"GET",headers:{"Content-Type":"application/json",authorization:_("token")}});case 3:return t=e.sent,e.next=6,N(t);case 6:if(!(r=e.sent)||!r.success){e.next=11;break}return e.abrupt("return",r);case 11:return e.abrupt("return",Promise.reject(r.message));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/orders"),{method:"GET",headers:{"Content-Type":"application/json",authorization:_("token")}});case 3:return t=e.sent,e.next=6,N(t);case 6:if(!(r=e.sent)||!r.success){e.next=11;break}return e.abrupt("return",r);case 11:return e.abrupt("return",Promise.reject(r.message));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/orders"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",authorization:_("token")},body:JSON.stringify({ingredients:t})});case 3:return r=e.sent,e.next=6,N(r);case 6:if(!(n=e.sent)||!n.success){e.next=12;break}return console.log(n),e.abrupt("return",n);case 12:return e.abrupt("return",Promise.reject(n.message));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(Tn,"/orders/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return r=e.sent,e.next=6,N(r);case 6:if(!(n=e.sent)||!n.success){e.next=12;break}return console.log(n),e.abrupt("return",n);case 12:return e.abrupt("return",Promise.reject(n.message));case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log("Catched error "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),B=Object(x.c)("auth/login",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:if(!(r=e.sent)||!r.success){e.next=11;break}return O("token",r.accessToken,{path:"/"}),localStorage.setItem("token",r.refreshToken),localStorage.setItem("userName",r.user.name),console.log("Login success, "+r.user.name),e.abrupt("return",r);case 11:return e.abrupt("return",Promise.reject(r.message));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(x.c)("auth/logout",Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:if(!(t=e.sent)||!t.success){e.next=11;break}return O("token","",{path:"/"}),localStorage.removeItem("token"),localStorage.removeItem("userName"),console.log("logout success"),e.abrupt("return",t);case 11:return e.abrupt("return",Promise.reject(t.message));case 12:case"end":return e.stop()}}),e)})))),G=Object(x.c)("auth/register",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:if(!(r=e.sent)||!r.success){e.next=8;break}return console.log("register success"+r.user),e.abrupt("return",r.user);case 8:return e.abrupt("return",Promise.reject(r.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(x.c)("auth/updateUser",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:if(!(r=e.sent)||!r.success){e.next=8;break}return localStorage.setItem("userName",r.user.name),console.log("update success ",r),e.abrupt("return",r.user);case 8:throw new Error(r);case 11:if(e.prev=11,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=17;break}return e.next=16,k(I,t);case 16:return e.abrupt("return",e.sent);case 17:return console.log('Catched and hadled error: "'.concat(e.t0,'"')),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),J=Object(x.c)("auth/getUser",Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:if(!(t=e.sent)||!t.success){e.next=7;break}return localStorage.setItem("userName",t.user.name),e.abrupt("return",t);case 7:throw new Error(t.message);case 10:if(e.prev=10,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=17;break}return console.log(e.t0.message),e.next=16,k(E,null);case 16:return e.abrupt("return",Promise.reject(e.t0));case 17:return console.log('Catched and hadled error: "'.concat(e.t0.message,'"')),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,10]])})))),H={isAuthorized:!1,user:{name:"",email:""},isLoading:!1,hasError:!1},Z=Object(x.d)({name:"auth",initialState:H,reducers:{},extraReducers:function(e){e.addCase(B.pending,(function(e){e.isLoading=!0,e.hasError=!1,e.isAuthorized=!1})).addCase(B.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.isAuthorized=!1,e.user=H.user})).addCase(B.fulfilled,(function(e,t){e.user=t.payload.user,e.hasError=!1,e.isAuthorized=!0,e.isLoading=!1})).addCase(G.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(G.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(G.fulfilled,(function(e){e.isLoading=!1,e.hasError=!1})).addCase(R.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(R.fulfilled,(function(e){e.isAuthorized=!1,e.isLoading=!1,e.hasError=!1,e.user=H.user})).addCase(R.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.isAuthorized=!0})).addCase(J.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(J.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(J.fulfilled,(function(e,t){e.user=t.payload.user,e.isAuthorized=!0,e.isLoading=!1,e.hasError=!1})).addCase(U.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(U.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(U.fulfilled,(function(e,t){e.user=t.payload,e.isLoading=!1,e.hasError=!1}))}}).reducer,V=r(46),W=function(){return Object(m.i)()},X=function(){return Object(V.b)()},Y=V.c,Q=r(0),q=function(e){var t=e.icon,r=e.name,n=e.type,s=e.placeholder,c=e.value,i=e.onChange,o=e.disabled,l=a.a.useState(!0),d=Object(u.a)(l,2),m=d[0],j=d[1];return Object(Q.jsx)(p.Input,{icon:t,name:r,disabled:null!==o&&void 0!==o?o:m,type:n,placeholder:s,value:c,onBlur:function(){j(!0)},onIconClick:function(){j(!1)},onChange:i})},K=function(){var e,t=a.a.useState({email:"",password:""}),r=Object(u.a)(t,2),n=r[0],s=r[1],c=Y((function(e){return e.auth})).isAuthorized,l=Object(m.h)(),f=X(),b=function(e){s(Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e.target.name,e.target.value)))};return c?Object(Q.jsx)(m.a,{to:(null===(e=l.state)||void 0===e?void 0:e.from)||"/"}):Object(Q.jsxs)("div",{className:d.a.wrapper,children:[Object(Q.jsxs)("form",{className:d.a.form,onSubmit:function(e){e.preventDefault(),n.email&&n.password&&(f(B(n)),s({email:"",password:""}))},children:[Object(Q.jsx)("h1",{className:d.a.heading,children:"\u0412\u0445\u043e\u0434"}),Object(Q.jsx)(q,{disabled:!1,name:"email",type:"email",value:n.email,placeholder:"E-mail",onChange:b}),Object(Q.jsx)(p.PasswordInput,{name:"password",value:n.password,onChange:b}),Object(Q.jsx)("span",{className:d.a.button,children:Object(Q.jsx)(p.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(Q.jsxs)("p",{className:d.a.text,children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0",Object(Q.jsx)(j.b,{className:d.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Q.jsxs)("p",{className:d.a.text,children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Q.jsx)(j.b,{className:d.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},$=r(17),ee=r.n($),te=Object(x.c)("password/forgot",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(!(r=e.sent).success){e.next=7;break}localStorage.setItem("emailConfirmationSended","true"),e.next=8;break;case 7:throw new Error(r.message);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(x.c)("password/reset",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if((r=e.sent).success){e.next=5;break}throw new Error(r.message);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=Object(x.d)({name:"password",initialState:{isLoading:!1,hasError:!1,success:!1,errorMessage:""},reducers:{},extraReducers:function(e){e.addCase(re.pending,(function(e){e.errorMessage="",e.isLoading=!0,e.hasError=!1,e.success=!1})).addCase(re.rejected,(function(e,t){e.errorMessage=t.error.message,e.isLoading=!1,e.hasError=!0,e.success=!1})).addCase(re.fulfilled,(function(e){e.errorMessage="",e.isLoading=!1,e.hasError=!1,e.success=!0})).addCase(te.pending,(function(e){e.errorMessage="",e.isLoading=!0,e.hasError=!1})).addCase(te.rejected,(function(e,t){e.errorMessage=t.error.message,e.isLoading=!1,e.hasError=!0})).addCase(te.fulfilled,(function(e){e.errorMessage="",e.isLoading=!1,e.hasError=!1}))}}).reducer,ae=function(){var e=a.a.useState(""),t=Object(u.a)(e,2),r=t[0],n=t[1],s=X(),c=Object(m.h)(),i=Y((function(e){return e.auth})).isAuthorized,o=Y((function(e){return e.password})).isLoading,l=localStorage.getItem("emailConfirmationSended");if(i){console.log("location state ",c.state);var d=(c.state||{from:{pathname:"/"}}).from;return Object(Q.jsx)(m.a,{to:d})}return!o&&l?Object(Q.jsx)(m.a,{to:{pathname:"/reset-password",state:{from:{pathname:"/forgot-password"}}}}):Object(Q.jsxs)("div",{className:ee.a.wrapper,children:[Object(Q.jsxs)("form",{className:ee.a.form,onSubmit:function(e){e.preventDefault(),s(te(r)),n("")},children:[Object(Q.jsx)("h1",{className:ee.a.heading,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Q.jsx)(p.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",value:r,onChange:function(e){n(e.target.value)}}),Object(Q.jsx)("span",{className:ee.a.button,children:Object(Q.jsx)(p.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(Q.jsxs)("p",{className:ee.a.text,children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Q.jsx)(j.b,{className:ee.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},se=r(86),ce=r.n(se),ie=r(87),oe=r.n(ie),ue=r(100),le={sortedCart:{bun:null,fillers:[]},counts:{},total:0},de=Object(x.d)({name:"cart",initialState:le,reducers:{addIngredient:function(e,t){var r=t.payload.item;if(e.counts[r._id]?e.counts[r._id]++:e.counts[r._id]=1,"bun"===r.type){var n,a=null===(n=e.sortedCart.bun)||void 0===n?void 0:n._id;e.counts[a]&&e.counts[a]--,e.sortedCart.bun=r}else{var s=[].concat(Object(ue.a)(e.sortedCart.fillers),[{item:r,constructorId:Object(x.e)()}]);e.sortedCart.fillers=s}},deleteIngredient:function(e,t){var r=t.payload,n=r.id,a=r.itemIndex,s=Object(ue.a)(e.sortedCart.fillers);s.splice(a,1),1===e.counts[n]?e.counts[n]=0:e.counts[n]--,e.sortedCart.fillers=s},resetCart:function(e){return le},moveIngredient:function(e,t){var r=t.payload,n=r.dragIndex,a=r.dropIndex,s=[e.sortedCart.fillers[a],e.sortedCart.fillers[n]];e.sortedCart.fillers[n]=s[0],e.sortedCart.fillers[a]=s[1]},countTotal:function(e){var t,r,n=e.sortedCart.fillers;e.total=(null===(t=e.sortedCart.bun)||void 0===t?void 0:t.price)?n.reduce((function(e,t){return e+t.item.price}),0)+2*(null===(r=e.sortedCart.bun)||void 0===r?void 0:r.price):n.reduce((function(e,t){return e+t.item.price}),0)}}}),pe=de.actions,me=pe.addIngredient,je=pe.deleteIngredient,fe=pe.resetCart,be=pe.countTotal,he=pe.moveIngredient,xe=de.reducer,_e=r(243),Oe=r(244),ge=function(e){var t=e.item,r=e.index,a=X(),s=Object(n.useRef)(null),c=Object(_e.a)({accept:"sort",collect:function(e){return{handlerId:e.getHandlerId(),isOver:e.isOver()}},hover:function(e,t){var n;if(s.current){var c=e.index,i=r;if(c!==i){var o=null===(n=s.current)||void 0===n?void 0:n.getBoundingClientRect(),u=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;c<i&&l<u||c>i&&l>u||(a(he({dragIndex:c,dropIndex:i})),e.index=i)}}}}),i=Object(u.a)(c,2),o=i[0].handlerId,l=i[1],d=Object(Oe.a)({type:"sort",item:function(){return{item:t,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(u.a)(d,2),j=m[0].isDragging?0:1;return(0,m[1])(l(s)),Object(Q.jsx)("li",{className:oe.a.list_item,style:{opacity:j},"data-handler-id":o,ref:s,children:Object(Q.jsxs)("div",{className:oe.a.item_container,children:[Object(Q.jsx)(p.DragIcon,{type:"primary"}),Object(Q.jsx)(p.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){a(je({id:t._id,itemIndex:r})),a(be())}})]})})},ve=r(121),we=r.n(ve),ye=function(){var e=Y((function(e){return e.cart.sortedCart})).fillers;return Object(Q.jsx)("ul",{className:we.a.main_container,children:e&&e.map((function(e,t){return Object(Q.jsx)(ge,{item:e.item,index:t},e.constructorId||e.item._id)}))})},Ce=r(89),Ne=r.n(Ce),ke=r(33),Ee=r.n(ke),Se=["title","titleId"];function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Le(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Te(e,t){var r=e.title,a=e.titleId,s=Le(e,Se);return n.createElement("svg",Ie({width:107,height:102,viewBox:"0 0 107 102",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,g||(g=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z",fill:"url(#paint0_radial)",fillOpacity:.25})),v||(v=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z",fill:"url(#paint1_radial)",fillOpacity:.25})),w||(w=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z",fill:"url(#paint2_radial)",fillOpacity:.25})),y||(y=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z",fill:"#F2F2F3"})),C||(C=n.createElement("defs",null,n.createElement("radialGradient",{id:"paint0_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)"},n.createElement("stop",{stopColor:"#801AB3",stopOpacity:0}),n.createElement("stop",{offset:1,stopColor:"#4C4CFF"})),n.createElement("radialGradient",{id:"paint1_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)"},n.createElement("stop",{stopColor:"#801AB3",stopOpacity:0}),n.createElement("stop",{offset:1,stopColor:"#4C4CFF"})),n.createElement("radialGradient",{id:"paint2_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)"},n.createElement("stop",{stopColor:"#801AB3",stopOpacity:0}),n.createElement("stop",{offset:1,stopColor:"#4C4CFF",stopOpacity:.5})))))}var Pe=n.forwardRef(Te),Me=(r.p,r(90)),Fe=r.n(Me),De=r(122),ze=r.n(De),Ae=function(e){var t=e.type,r=void 0===t?"default":t;return Object(Q.jsx)(Q.Fragment,{children:"default"===r?Object(Q.jsx)("div",{className:ze.a.overlay,children:Object(Q.jsx)(Fe.a,{type:"Oval",color:"#801AB2",height:64,width:64})}):Object(Q.jsx)(Fe.a,{type:"Oval",color:"#801AB2",height:96,width:96})})},Be=function(){var e=Y((function(e){return e.order})),t=e.order,r=e.isLoading;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("span",{className:Ee.a.order_number,children:t&&t.number}),Object(Q.jsx)("span",{className:Ee.a.subtitle,children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Q.jsx)("span",{className:Ee.a.icon,children:r?Object(Q.jsx)(Ae,{type:"light"}):Object(Q.jsx)(Pe,{})}),Object(Q.jsx)("p",{className:Ee.a.text,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(Q.jsx)("p",{className:"".concat(Ee.a.text," ").concat(Ee.a.text_secondary),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Re=r(38),Ge=r.n(Re),Ue=r(59),Je=r.n(Ue),He=function(e){var t=e.isOpen,r=e.onClick,n=a.a.useRef(null);return a.a.useEffect((function(){var e=function(e){e.target===n.current&&r()};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[r]),Object(Q.jsx)("div",{className:t?"".concat(Je.a.overlay," ").concat(Je.a.overlay_opened):Je.a.overlay,ref:n})},Ze=document.getElementById("modal-root"),Ve=function(e){var t=e.title,r=e.onClose,n=e.children,s=e.name,i=e.titleType,o=void 0===i?"default":i,u=Y((function(e){return e.modal["is".concat(s,"ModalOpen")]}));return a.a.useEffect((function(){var e=function(e){27===e.keyCode&&r()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[r]),c.a.createPortal(Object(Q.jsxs)("div",{className:Ge.a.container,children:[Object(Q.jsxs)("div",{className:Ge.a.modal,children:[Object(Q.jsx)("h2",{className:"id"===o?Ge.a.heading_type_id:Ge.a.heading,children:t}),Object(Q.jsx)("span",{className:Ge.a.close,onClick:r,children:Object(Q.jsx)(p.CloseIcon,{type:"primary"})}),n]}),Object(Q.jsx)(He,{isOpen:u,onClick:r})]}),Ze)},We=Object(x.c)("order/setOrder",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:if(r=e.sent,console.log(r),!r||!r.success){e.next=7;break}return e.abrupt("return",r.order);case 7:throw new Error(r.message);case 10:if(e.prev=10,e.t0=e.catch(0),console.log(e.t0),"jwt expired"!==e.t0){e.next=18;break}return console.log(e.t0),e.next=17,k(z,t);case 17:return e.abrupt("return",e.sent);case 18:return console.log('Catched and hadled error: "'.concat(e.t0,'"')),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),Xe=Object(x.c)("order/getOrders",Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:if(!(t=e.sent)||!t.success){e.next=7;break}return console.log(t),e.abrupt("return",t);case 7:throw new Error(t.message);case 10:if(e.prev=10,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=17;break}return console.log(e.t0.message),e.next=16,k(F,null);case 16:return e.abrupt("return",e.sent);case 17:return console.log('Catched and hadled error: "'.concat(e.t0,'"')),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,10]])})))),Ye=Object(x.c)("order/getUserOrders",Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:if(!(t=e.sent)||!t.success){e.next=7;break}return console.log(t),e.abrupt("return",t);case 7:throw new Error(t.message);case 10:if(e.prev=10,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=17;break}return console.log(e.t0.message),e.next=16,k(D,null);case 16:return e.abrupt("return",e.sent);case 17:return console.log('Catched and hadled error: "'.concat(e.t0.message,'"')),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,10]])})))),Qe=Object(x.c)("order/getOrderById",function(){var e=Object(h.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:if(!(r=e.sent)||!r.success){e.next=7;break}return console.log(r),e.abrupt("return",r);case 7:throw new Error(r.message);case 10:if(e.prev=10,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=17;break}return console.log(e.t0.message),e.next=16,k(A,t);case 16:return e.abrupt("return",e.sent);case 17:return console.log('Catched and hadled error: "'.concat(e.t0.message,'"')),e.abrupt("return",Promise.reject(e.t0.message));case 19:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),qe=Object(x.d)({name:"order",initialState:{allOrders:[],userOrders:[],orderToShow:{},total:null,totalToday:null,order:{},isLoading:!1,hasError:!1},reducers:{clearOrder:function(e){e.order={}},setOrderToShow:function(e,t){e.orderToShow=t.payload},resetOrderToShow:function(e){e.orderToShow={}}},extraReducers:function(e){e.addCase(We.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(We.fulfilled,(function(e,t){e.order=t.payload,e.isLoading=!1,e.hasError=!1})).addCase(We.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.order={}})).addCase(Xe.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(Xe.fulfilled,(function(e,t){e.allOrders=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday,e.isLoading=!1,e.hasError=!1})).addCase(Xe.rejected,(function(e){e.isLoading=!1,e.hasError=!0})).addCase(Ye.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(Ye.fulfilled,(function(e,t){e.userOrders=t.payload.orders,e.isLoading=!1,e.hasError=!1})).addCase(Ye.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.userOrders=[]})).addCase(Qe.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(Qe.fulfilled,(function(e,t){e.isLoading=!1,e.hasError=!1})).addCase(Qe.rejected,(function(e){e.isLoading=!1,e.hasError=!0}))}}),Ke=qe.actions,$e=Ke.clearOrder,et=Ke.setOrderToShow,tt=(Ke.resetOrderToShow,qe.reducer),rt=Object(x.d)({name:"modal",initialState:{isDetailsModalOpen:!1,isOrderModalOpen:!1},reducers:{openDetailsModal:function(e){e.isDetailsModalOpen=!0},closeDetailsModal:function(e){e.isDetailsModalOpen=!1},openOrderModal:function(e){e.isOrderModalOpen=!0},closeOrderModal:function(e){e.isOrderModalOpen=!1}}}),nt=rt.actions,at=nt.openDetailsModal,st=nt.closeDetailsModal,ct=nt.openOrderModal,it=nt.closeOrderModal,ot=rt.reducer,ut=function(){var e=Y((function(e){return e.auth})).isAuthorized,t=Y((function(e){return e.modal})).isOrderModalOpen,r=Y((function(e){return e.cart})).total,a=Y((function(e){return e.cart.sortedCart})),s=a.fillers,c=a.bun,i=X(),o=Object(m.g)(),u=Object(n.useMemo)((function(){var e=s.map((function(e){var t;return null===(t=e.item)||void 0===t?void 0:t._id}));return c&&e.push(null===c||void 0===c?void 0:c._id),e}),[s,c]);return Object(Q.jsxs)("div",{className:Ne.a.order,children:[Object(Q.jsxs)("span",{className:Ne.a.price,children:[r,"\xa0",Object(Q.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(Q.jsx)(p.Button,{onClick:function(){if(!e)return o.replace("/login");c&&(i(We(u)),i(ct()))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),t&&Object(Q.jsx)(Ve,{name:"Order",onClose:function(){i(it()),i(fe()),i($e())},children:Object(Q.jsx)(Be,{})})]})},lt=r(91),dt=r.n(lt),pt=function(e){var t=e.position,r=Y((function(e){return e.cart.sortedCart})).bun,a=Object(n.useState)(!0),s=Object(u.a)(a,2),c=s[0],i=s[1];Object(n.useEffect)((function(){i(!r)}),[r]);var o="top"===t?"(\u0432\u0435\u0440\u0445)":"(\u043d\u0438\u0437)";return Object(Q.jsx)("div",{className:c?dt.a.bun_empty:dt.a.bun,children:c?Object(Q.jsx)(p.ConstructorElement,{type:t,text:"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0430\u043f\u043f\u0435\u0442\u0438\u0442\u043d\u043e\u0439 \u0431\u0443\u043b\u043a\u0438 ".concat(o),thumbnail:"",price:0}):Object(Q.jsx)(p.ConstructorElement,{type:t,isLocked:!0,text:"".concat(null===r||void 0===r?void 0:r.name," ").concat(o),price:null===r||void 0===r?void 0:r.price,thumbnail:null===r||void 0===r?void 0:r.image})})},mt=function(){var e=X(),t=Object(_e.a)({accept:"ingredients",collect:function(e){return{isHover:e.isOver()}},drop:function(t){e(me(t)),e(be())}}),r=Object(u.a)(t,2),n=r[0].isHover,a=r[1],s=n?"1px dashed gray":"none";return Object(Q.jsxs)("section",{className:ce.a.container,ref:a,style:{border:s},children:[Object(Q.jsx)(pt,{position:"top"}),Object(Q.jsx)("div",{className:ce.a.scroller,children:Object(Q.jsx)(ye,{})}),Object(Q.jsx)(pt,{position:"bottom"}),Object(Q.jsx)(ut,{})]})},jt=r(92),ft=r.n(jt),bt=r(34),ht=r.n(bt),xt=function(e){var t=e.item,r=e.onClick,n=Object(m.h)(),a=Y((function(e){return e.cart})).counts,s=Object(Oe.a)({type:"ingredients",item:{item:t},collect:function(e){return{isDrag:e.isDragging()}}}),c=Object(u.a)(s,2)[1];return Object(Q.jsx)(j.b,{className:ht.a.item,to:{pathname:"/ingredients/".concat(t._id),state:{from:n.pathname,pushLocation:n}},children:Object(Q.jsxs)("article",{className:ht.a.card,onClick:function(){return r(t)},ref:c,children:[a[t._id]>0&&Object(Q.jsx)(p.Counter,{count:"bun"===t.type?a[t._id]+1:a[t._id]}),Object(Q.jsxs)("picture",{className:ht.a.picture,children:[Object(Q.jsx)("source",{media:"(max-width: 767px)",srcSet:t.image_mobile}),Object(Q.jsx)("source",{media:"(min-width: 768px)",srcSet:t.image_large}),Object(Q.jsx)("img",{className:ht.a.image,src:t.image,alt:t.name})]}),Object(Q.jsxs)("span",{className:ht.a.price,children:[t.price,"\xa0",Object(Q.jsx)(p.CurrencyIcon,{type:"primary"})]}),Object(Q.jsx)("p",{className:ht.a.text,children:t.name})]},t._id)})},_t=r(123),Ot=r.n(_t),gt=r(60),vt=r(93),wt=r.n(vt),yt=a.a.memo((function(e){var t=e.title,r=e.refs,n=e.data,a=e.onClick;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h2",{className:wt.a.title,ref:r,children:t}),Object(Q.jsx)("ul",{className:wt.a.items,children:n&&n.map((function(e){return Object(Q.jsx)("li",{children:Object(Q.jsx)(xt,{item:e,onClick:a})},e._id)}))})]})})),Ct=function(e){var t=e.setCurrent,r=e.onClick,a=Y((function(e){return e.ingredients})).ingredients,s=Object(gt.a)({threshold:0}),c=Object(u.a)(s,2),i=c[0],o=c[1],l=Object(gt.a)({threshold:0}),d=Object(u.a)(l,2),p=d[0],m=d[1],j=Object(gt.a)({threshold:0}),f=Object(u.a)(j,2),b=f[0],h=f[1];return Object(n.useEffect)((function(){o?t("bun"):m?t("sauce"):h&&t("main")}),[t,o,m,h]),Object(Q.jsxs)("div",{className:Ot.a.scroller,children:[Object(Q.jsx)(yt,{title:"\u0411\u0443\u043b\u043a\u0438",refs:i,data:a&&a.filter((function(e){return"bun"===e.type})),onClick:r}),Object(Q.jsx)(yt,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",refs:b,data:a&&a.filter((function(e){return"main"===e.type})),onClick:r}),Object(Q.jsx)(yt,{title:"\u0421\u043e\u0443\u0441\u044b",refs:p,data:a&&a.filter((function(e){return"sauce"===e.type})),onClick:r})]})},Nt=r(124),kt=r.n(Nt),Et=[{value:"bun",title:"\u0411\u0443\u043b\u043a\u0438"},{value:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},{value:"sauce",title:"\u0421\u043e\u0443\u0441\u044b"}],St=function(e){var t=e.current;return Object(Q.jsx)("div",{className:kt.a.tab_container,children:Et.map((function(e){var r=e.value,n=e.title;return Object(Q.jsx)(p.Tab,{value:r,active:t===r,onClick:function(){},children:n},r)}))})},It=a.a.memo(St),Lt=Object(x.c)("ingredients/getIngredients",Object(h.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Tn+"/ingredients");case 3:if((t=e.sent).ok){e.next=6;break}return e.abrupt("return",Promise.reject("Failed response: "+t));case 6:return e.next=8,t.json();case 8:if(!(r=e.sent).success){e.next=13;break}return e.abrupt("return",r.data);case 13:return e.abrupt("return",Promise.reject(t));case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.log("Catched error: "+e.t0.message),e.abrupt("return",Promise.reject(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))),Tt=Object(x.d)({name:"ingredients",initialState:{ingredients:[],ingredientToShow:{},isLoading:!1,hasError:!1},reducers:{setIngredientToShow:function(e,t){e.ingredientToShow=t.payload},resetIngredientToShow:function(e){e.ingredientToShow={}}},extraReducers:function(e){e.addCase(Lt.pending,(function(e){e.isLoading=!0,e.hasError=!1})).addCase(Lt.fulfilled,(function(e,t){e.ingredients=t.payload,e.isLoading=!1,e.hasError=!1})).addCase(Lt.rejected,(function(e){e.isLoading=!1,e.hasError=!0,e.ingredients=[]}))}}),Pt=Tt.actions,Mt=Pt.setIngredientToShow,Ft=Pt.resetIngredientToShow,Dt=Tt.reducer,zt=function(){var e=a.a.useState("bun"),t=Object(u.a)(e,2),r=t[0],n=t[1],s=X();return Object(Q.jsxs)("section",{className:ft.a.ingredients,children:[Object(Q.jsx)("h1",{className:ft.a.title,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(Q.jsx)(It,{current:r}),Object(Q.jsx)(Ct,{setCurrent:n,onClick:function(e){s(Mt(e)),s(at())}})]})},At=a.a.memo(zt),Bt=r(242),Rt=r(131),Gt=r(125),Ut=r.n(Gt),Jt=function(){return Object(Q.jsx)("div",{className:Ut.a.wrapper,children:Object(Q.jsxs)(Bt.a,{backend:Rt.a,children:[Object(Q.jsx)(At,{}),Object(Q.jsx)(mt,{})]})})},Ht=r(47),Zt=r.n(Ht),Vt=r(61),Wt=r.n(Vt),Xt=function(e){var t=e.title,r=e.value;return Object(Q.jsxs)("li",{className:Wt.a.nutrition_item,children:[Object(Q.jsx)("p",{className:Wt.a.text,children:t}),Object(Q.jsx)("p",{className:Wt.a.value,children:r})]})},Yt=r(126),Qt=r.n(Yt),qt=function(e){var t=e.calories,r=e.proteins,n=e.fat,a=e.carbohydrates;return Object(Q.jsxs)("ul",{className:Qt.a.nutrition,children:[Object(Q.jsx)(Xt,{title:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",value:t}),Object(Q.jsx)(Xt,{title:"\u0411\u0435\u043b\u043a\u0438, \u0433",value:r}),Object(Q.jsx)(Xt,{title:"\u0416\u0438\u0440\u044b, \u0433",value:n}),Object(Q.jsx)(Xt,{title:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",value:a})]})},Kt=function(){var e,t=W().id,r=Y((function(e){return e.ingredients})),n=r.ingredients,a=r.isLoading,s=r.hasError,c=Y((function(e){return e.ingredients.ingredientToShow}));return e=t?n.find((function(e){return e._id===t})):c,Object(Q.jsx)(Q.Fragment,{children:a||s||0===n.length?Object(Q.jsx)(Ae,{}):Object(Q.jsxs)("div",{className:Zt.a.detail,children:[Object(Q.jsxs)("picture",{className:Zt.a.picture,children:[Object(Q.jsx)("source",{media:"(max-width: 768px)",srcSet:e.image_mobile}),Object(Q.jsx)("source",{media:"(min-width: 1024px)",srcSet:e.image_large}),Object(Q.jsx)("img",{src:e.image,alt:e.name,className:Zt.a.image})]}),Object(Q.jsx)("h3",{className:Zt.a.title,children:e.name}),Object(Q.jsx)(qt,Object(o.a)({},e))]})})},$t=r(95),er=r.n($t),tr=function(){return Object(Q.jsxs)("div",{className:er.a.wrapper,children:[Object(Q.jsx)("h2",{className:er.a.title,children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(Q.jsx)(Kt,{})]})},rr=r(48),nr=r.n(rr),ar=function(){return Object(Q.jsxs)("section",{className:nr.a.wrapper,children:[Object(Q.jsx)("p",{className:nr.a.title,children:"404"}),Object(Q.jsxs)("p",{className:nr.a.text,children:["\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430"," ",Object(Q.jsx)(j.b,{className:nr.a.link,to:{pathname:"/"},children:"\u0413\u043b\u0430\u0432\u043d\u0443\u044e"})]})]})},sr=r(127),cr=r.n(sr),ir=r(21),or=r.n(ir),ur=function(e){var t=e.text,r=X(),n=Object(m.g)(),a=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(R());case 2:n.replace({pathname:"/login"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:or.a.navmenu,children:[Object(Q.jsxs)("ul",{className:or.a.menu,children:[Object(Q.jsx)("li",{className:or.a.menu_item,children:Object(Q.jsx)(j.c,{to:"/profile",exact:!0,className:or.a.link,activeClassName:or.a.active,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(Q.jsx)("li",{className:or.a.menu_item,children:Object(Q.jsx)(j.c,{to:{pathname:"/profile/orders"},exact:!0,className:or.a.link,activeClassName:or.a.active,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(Q.jsx)("li",{className:or.a.menu_item,children:Object(Q.jsx)(j.c,{to:{pathname:"/login"},exact:!0,className:or.a.link,activeClassName:or.a.active,onClick:a,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(Q.jsx)("p",{className:or.a.text,children:t})]})},lr=r(96),dr=r.n(lr),pr=function(){var e=Y((function(e){return e.auth.user})),t=e.name,r=e.email,a=Object(n.useState)({name:t,email:r,password:""}),s=Object(u.a)(a,2),c=s[0],l=s[1],d=Object(n.useState)(!1),m=Object(u.a)(d,2),j=m[0],f=m[1],b=function(e){l(Object(o.a)(Object(o.a)({},c),{},Object(i.a)({},e.target.name,e.target.value))),j||f(!0)},h=X(),x=Object(n.useCallback)((function(e){e.preventDefault(),c.name&&c.email&&(h(U(c)),f(!1))}),[h,c]),_=Object(n.useCallback)((function(){l({name:t,email:r,password:""}),f(!1)}),[t,r]);return Object(Q.jsxs)("form",{className:dr.a.user_info,onSubmit:x,children:[Object(Q.jsx)(q,{icon:"EditIcon",name:"name",type:"text",value:c.name,placeholder:"\u0418\u043c\u044f",onChange:b}),Object(Q.jsx)(q,{icon:"EditIcon",name:"email",type:"email",value:c.email,placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:b}),Object(Q.jsx)(q,{icon:"EditIcon",name:"password",type:"password",value:c.password,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:b}),j&&Object(Q.jsxs)("span",{className:dr.a.button,children:[Object(Q.jsx)(p.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(Q.jsx)(p.Button,{onClick:_,size:"medium",type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},mr=function(){var e=Y((function(e){return e.auth})).isAuthorized,t=Object(m.h)();if(!e){var r=(t.state||{from:{pathname:"/login"}}).from;return Object(Q.jsx)(m.a,{to:r})}return Object(Q.jsxs)("section",{className:cr.a.wrapper,children:[Object(Q.jsx)(ur,{text:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(Q.jsx)(pr,{})]})},jr=r(128),fr=r.n(jr),br=r(97),hr=r.n(br),xr=r(22),_r=r.n(xr),Or=r(62),gr=r.n(Or),vr=function(e){var t=e.children,r=e.iconType,n=void 0===r?"primary":r,a=e.size,s=void 0===a?"default":a;return Object(Q.jsxs)("span",{className:"".concat(gr.a.price," ").concat("default"===s?gr.a.default:gr.a.medium),children:[t,Object(Q.jsx)(p.CurrencyIcon,{type:n})]})};function wr(e){var t=function(e){var t=new Date,r=new Date(e);return r.setHours(0,0,0,0),t.setHours(0,0,0,0),function(e){return 0===e?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===e?"\u0412\u0447\u0435\u0440\u0430":"".concat(e,e>1&&e<5?" \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434":" \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434")}((+t-+r)/864e5)}(e),r=function(e){return new Date(e).toLocaleString("ru",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}(e);return"".concat(t,", ").concat(r)}var yr=function(e){return e.reduce((function(e,t){return e+("bun"===t.type?2*t.price:t.price)}),0)},Cr={done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",created:"\u0421\u043e\u0437\u0434\u0430\u043d",cancel:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"},Nr=function(e){for(var t=[],r=0;r<e.length;r++){var n,a=e[r],s=null;if(5===r&&(s=e.length-5),n=e.length-r,null!==s)break;t.push(Object(Q.jsx)("li",{style:{zIndex:n},children:Object(Q.jsxs)("div",{className:_r.a.preview,children:[s&&Object(Q.jsxs)("span",{className:_r.a.others,children:["+",s]}),Object(Q.jsx)("img",{className:_r.a.image,src:a.image_mobile,alt:a.name})]})},Object(x.e)()))}return t},kr=function(e){var t=e.item,r=Y((function(e){return e.ingredients.ingredients})),n=t.number,a=t.createdAt,s=t.name,c=t.status,i=t.ingredients,o=Object(m.j)().url,u=X(),l=Object(m.h)(),d=function(e,t){for(var r=[],n=function(n){var a=e[n],s=t.find((function(e){return e._id===a}));s&&r.push(s)},a=0;a<e.length;a++)n(a);return r}(i,r),p="done"===c?"var(--colors-interface-success)":"cancel"===c?"var(--colors-interface-error)":"inherit",f=wr(a),b=d&&i&&yr(d);return Object(Q.jsx)(j.b,{to:{pathname:"".concat(o,"/").concat(n),state:{from:l.pathname,pushLocation:l}},className:_r.a.link,onClick:function(){u(et(t)),u(at())},children:Object(Q.jsxs)("article",{className:_r.a.card,children:[Object(Q.jsxs)("header",{className:_r.a.header,children:[Object(Q.jsxs)("span",{className:_r.a.id,children:["#",n]}),Object(Q.jsx)("time",{className:_r.a.time,children:f})]}),Object(Q.jsx)("h3",{className:_r.a.title,children:s}),Object(Q.jsx)("p",{className:_r.a.status,style:{color:p},children:Cr[c]}),Object(Q.jsxs)("div",{className:_r.a.content,children:[Object(Q.jsx)("ul",{className:_r.a.ingredients,children:Nr(d)}),Object(Q.jsx)(vr,{children:b})]})]})})},Er=r(98),Sr=r.n(Er),Ir=function(e){var t=e.children,r=e.height,n=e.type;return Object(Q.jsx)(Q.Fragment,{children:"list"===n?Object(Q.jsx)("ul",{className:Sr.a.scroller,style:{maxHeight:r},children:t}):Object(Q.jsx)("div",{className:Sr.a.scroller,style:{maxHeight:r},children:t})})},Lr=function(e){var t=e.orders,r=e.fullscreen?{width:"100%"}:{};return Object(Q.jsx)("section",{className:hr.a.order_list,style:r,children:Object(Q.jsx)(Ir,{type:"list",children:t.map((function(e,t){return Object(Q.jsx)("li",{className:hr.a.list_item,children:Object(Q.jsx)(kr,{item:e})},t)})).reverse()})})},Tr=Object(x.d)({name:"feed",initialState:{orders:[],total:0,totalToday:0,wsConnected:!1,hasError:!1},reducers:{wsConnectionSuccess:function(e){e.wsConnected=!0,e.hasError=!1},wsConnectionError:function(e){e.wsConnected=!1,e.hasError=!0},wsConnectionClosed:function(e){e.wsConnected=!1},wsGetMessage:function(e,t){var r=t.payload,n=r.orders,a=r.total,s=r.totalToday;r.success?(e.orders=n,e.total=a,e.totalToday=s):e.hasError=!0}}}),Pr=Tr.reducer,Mr=Tr.actions,Fr={onOpen:Mr.wsConnectionSuccess,onError:Mr.wsConnectionError,onClose:Mr.wsConnectionClosed,onMessage:Mr.wsGetMessage},Dr=Object(x.d)({name:"userFeed",initialState:{orders:[],wsConnected:!1,hasError:!1},reducers:{wsConnectionSuccess:function(e){e.wsConnected=!0,e.hasError=!1},wsConnectionError:function(e,t){e.wsConnected=!1,e.hasError=t.payload},wsConnectionClosed:function(e){e.wsConnected=!1},wsGetMessage:function(e,t){var r=t.payload,n=r.orders;r.success?(e.hasError=!1,e.orders=n):e.hasError=!0}}}),zr=Dr.reducer,Ar=Dr.actions,Br={feed:Fr,userFeed:{onOpen:Ar.wsConnectionSuccess,onError:Ar.wsConnectionError,onClose:Ar.wsConnectionClosed,onMessage:Ar.wsGetMessage},connect:{wsConnectionInit:Object(x.b)("WS_CONNECTION_INIT"),wsConnectionClose:Object(x.b)("WS_CONNECTION_CLOSE")}},Rr=function(){var e=Y((function(e){return e.auth})).isAuthorized,t=Object(m.h)(),r=X(),a=Y((function(e){return e.userFeed})),s=a.orders,c=a.wsConnected,i=a.hasError;if(Object(n.useEffect)((function(){return r(Br.connect.wsConnectionInit("userFeed")),function(){r(Br.connect.wsConnectionClose())}}),[r]),!e){console.log("in name ",t.state);var o=(t.state||{from:{pathname:"/"}}).from;return Object(Q.jsx)(m.a,{to:o})}return Object(Q.jsxs)(Q.Fragment,{children:[!c&&!i&&Object(Q.jsx)(Ae,{}),c&&!i&&Object(Q.jsxs)("section",{className:fr.a.wrapper,children:[Object(Q.jsx)(ur,{text:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Q.jsx)(Lr,{orders:s,fullscreen:!0})]})]})},Gr=function(){var e=Y((function(e){return e.auth})),t=e.isAuthorized,r=e.isLoading,n=e.hasError,s=Object(m.h)(),c=Object(m.g)(),l=a.a.useState(!1),d=Object(u.a)(l,2),f=d[0],x=d[1],_=a.a.useState({name:"",email:"",password:""}),O=Object(u.a)(_,2),g=O[0],v=O[1],w=X(),y=function(e){v(Object(o.a)(Object(o.a)({},g),{},Object(i.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,w(G(g));case 3:if(a=e.sent,console.log(a),r||n){e.next=8;break}return v({name:"",email:"",password:""}),e.abrupt("return",c.replace("/login"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(t){console.log("in name ",s.state);var N=(s.state||{from:{pathname:"/"}}).from;return Object(Q.jsx)(m.a,{to:N})}return Object(Q.jsxs)(Q.Fragment,{children:[r&&Object(Q.jsx)(Ae,{}),!r&&Object(Q.jsxs)("div",{className:ee.a.wrapper,children:[Object(Q.jsxs)("form",{className:ee.a.form,onSubmit:C,children:[Object(Q.jsx)("h1",{className:ee.a.heading,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(Q.jsx)(p.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:g.name,onChange:y}),Object(Q.jsx)(p.Input,{type:"email",placeholder:"Email",name:"email",value:g.email,onChange:y}),Object(Q.jsx)(p.Input,{type:f?"text":"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",icon:f?"ShowIcon":"HideIcon",value:g.password,onChange:y,onIconClick:function(){return x(!f)}}),Object(Q.jsx)("span",{className:ee.a.button,children:Object(Q.jsx)(p.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(Q.jsxs)("p",{className:ee.a.text,children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(Q.jsx)(j.b,{className:ee.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})},Ur=r(31),Jr=r.n(Ur),Hr=function(){var e=a.a.useState({password:"",token:""}),t=Object(u.a)(e,2),r=t[0],s=t[1],c=a.a.useState(!1),l=Object(u.a)(c,2),d=l[0],f=l[1],b=a.a.useState(!1),h=Object(u.a)(b,2),x=h[0],_=h[1],O=X(),g=Y((function(e){return e.password})),v=g.success,w=g.isLoading,y=g.hasError,C=g.errorMessage;Object(n.useEffect)((function(){_(y)}),[y]);var N=function(e){s(Object(o.a)(Object(o.a)({},r),{},Object(i.a)({},e.target.name,e.target.value))),_(!1)};return v?(localStorage.removeItem("emailConfirmationSended"),Object(Q.jsx)(m.a,{to:{pathname:"/login"}})):Object(Q.jsxs)("div",{className:Jr.a.wrapper,children:[w&&Object(Q.jsx)(Ae,{}),Object(Q.jsxs)("form",{className:Jr.a.form,onSubmit:function(e){e.preventDefault(),O(re(r)),s({password:"",token:""})},children:[Object(Q.jsx)("h1",{className:Jr.a.heading,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(Q.jsx)(p.Input,{type:d?"text":"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password",icon:d?"ShowIcon":"HideIcon",value:r.password,onChange:N,onIconClick:function(){return f(!d)},error:x,success:v}),Object(Q.jsx)(p.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"token",value:r.token,onChange:N,error:x,success:v}),x&&Object(Q.jsx)("span",{className:Jr.a.error,children:C}),Object(Q.jsx)("span",{className:Jr.a.button,children:Object(Q.jsx)(p.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(Q.jsxs)("p",{className:Jr.a.text,children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(Q.jsx)(j.b,{className:Jr.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Zr=r(49),Vr=r.n(Zr),Wr=function(e){var t=e.text,r=e.link,n=e.children;return Object(Q.jsxs)(j.c,{to:r,className:Vr.a.link,activeClassName:Vr.a.active,exact:!0,children:[Object(Q.jsx)("span",{className:Vr.a.icon,children:n}),Object(Q.jsx)("p",{className:Vr.a.text,children:t})]})},Xr=r(35),Yr=r.n(Xr),Qr=function(){var e=Y((function(e){return e.auth.user.name}));return Object(Q.jsx)("nav",{className:Yr.a.navbar,children:Object(Q.jsxs)("ul",{className:Yr.a.nav_menu,children:[Object(Q.jsx)("li",{children:Object(Q.jsxs)("div",{className:Yr.a.item_wrapper,children:[Object(Q.jsx)(Wr,{text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",link:"/",children:Object(Q.jsx)(p.BurgerIcon,{type:"primary"})}),Object(Q.jsx)(Wr,{text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"/feed",children:Object(Q.jsx)(p.ListIcon,{type:"primary"})})]})}),Object(Q.jsx)("li",{className:Yr.a.logo,children:Object(Q.jsx)(j.b,{to:"/",className:Yr.a.link,children:Object(Q.jsx)(p.Logo,{})})}),Object(Q.jsx)("div",{className:Yr.a.item_wrapper,children:Object(Q.jsx)("li",{children:Object(Q.jsx)(Wr,{text:e||"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",link:"/profile",children:Object(Q.jsx)(p.ProfileIcon,{type:"primary"})})})})]})})},qr=r(129),Kr=r.n(qr),$r=function(){return Object(Q.jsx)("header",{className:Kr.a.header,children:Object(Q.jsx)(Qr,{})})},en=r(30),tn=["children"],rn=function(e){var t=e.children,r=Object(en.a)(e,tn),n=Y((function(e){return e.auth})).isAuthorized,a=localStorage.getItem("emailConfirmationSended"),s=(Object(m.h)().state||{from:{pathname:"/"}}).from;return Object(Q.jsx)(m.b,Object(o.a)(Object(o.a)({},r),{},{render:function(e){return n||"true"!==a?Object(Q.jsx)(m.a,{to:s}):t}}))},nn=["children"],an=function(e){var t=e.children,r=Object(en.a)(e,nn),n=Y((function(e){return e.auth})).isAuthorized;return Object(Q.jsx)(m.b,Object(o.a)(Object(o.a)({},r),{},{render:function(e){var r=e.location;return n?t:Object(Q.jsx)(m.a,{to:{pathname:"/login",state:{from:r}}})}}))},sn=r(50),cn=r.n(sn),on=r(14),un=r.n(on),ln=function(){var e=Y((function(e){return e.feed})),t=e.orders,r=e.total,n=e.totalToday,a=t&&t.filter((function(e){return"done"===e.status})).slice(0,21),s=t&&t.filter((function(e){return"pending"===e.status})).slice(0,21);return Object(Q.jsx)("section",{className:un.a.dashboard,children:t?Object(Q.jsxs)("article",{className:un.a.orders,children:[Object(Q.jsxs)("div",{className:un.a.content,children:[Object(Q.jsxs)("div",{className:un.a.content_item,children:[Object(Q.jsx)("header",{className:un.a.row__title,children:"\u0413\u043e\u0442\u043e\u0432\u044b: "}),Object(Q.jsx)("ul",{className:un.a.list,children:a.map((function(e){return Object(Q.jsx)("li",{className:un.a.ready,children:e.number},e._id)}))})]}),Object(Q.jsxs)("div",{className:un.a.content_item,children:[Object(Q.jsx)("header",{className:un.a.row__title,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435: "}),Object(Q.jsx)("ul",{className:un.a.list,children:s.map((function(e){return Object(Q.jsx)("li",{className:un.a.inprogress,children:e.number},e._id)}))})]})]}),Object(Q.jsxs)("div",{className:un.a.row,children:[Object(Q.jsx)("header",{className:un.a.row__title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(Q.jsx)("p",{className:un.a.row__content,children:r})]}),Object(Q.jsxs)("div",{className:un.a.row,children:[Object(Q.jsx)("header",{className:un.a.row__title,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(Q.jsx)("p",{className:un.a.row__content,children:n})]})]}):Object(Q.jsx)(Ae,{})})},dn=function(){var e=X(),t=Y((function(e){return e.feed})),r=t.orders,a=t.wsConnected,s=t.hasError;return Object(n.useEffect)((function(){return e(Br.connect.wsConnectionInit("feed")),function(){e(Br.connect.wsConnectionClose())}}),[e]),Object(Q.jsxs)(Q.Fragment,{children:[!a&&!s&&Object(Q.jsx)(Ae,{}),a&&!s&&Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)("section",{className:cn.a.wrapper,children:[Object(Q.jsxs)("section",{className:cn.a.order_list,children:[Object(Q.jsx)("h1",{className:cn.a.heading,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(Q.jsx)(Ir,{type:"list",height:"680px",children:r.map((function(e,t){return Object(Q.jsx)("li",{className:cn.a.list_item,children:Object(Q.jsx)(kr,{item:e})},t)}))})]}),Object(Q.jsx)(ln,{})]})})]})},pn=r(99),mn=r.n(pn),jn=r(63),fn=r.n(jn),bn=function(e){var t=e.name,r=e.status;return Object(Q.jsxs)("section",{className:fn.a.header,children:[Object(Q.jsx)("h2",{className:fn.a.title,children:t}),Object(Q.jsx)("p",{className:fn.a.status,children:Cr[r]})]})},hn=r(39),xn=r.n(hn),_n=function(e){var t=e.ingredient,r=e.price;return Object(Q.jsxs)("article",{className:xn.a.ingredient,children:[Object(Q.jsx)("div",{className:xn.a.ingredient,children:Object(Q.jsx)("picture",{className:xn.a.picture,children:Object(Q.jsx)("img",{src:t.image_mobile,alt:t.name})})}),Object(Q.jsx)("h4",{className:xn.a.ingredient_name,children:t.name}),Object(Q.jsxs)("span",{className:xn.a.price,children:[t&&"bun"===t.type?2:1,"\xa0x\xa0",r,Object(Q.jsx)(p.CurrencyIcon,{type:"primary"})]})]})},On=r(64),gn=r.n(On),vn=function(e){var t=e.datetime,r=e.price;return Object(Q.jsxs)("footer",{className:gn.a.footer,children:[Object(Q.jsx)("p",{className:gn.a.wrapper,children:Object(Q.jsx)("time",{dateTime:t,className:gn.a.time,children:t})}),Object(Q.jsx)(vr,{children:r})]})},wn=r(65),yn=r.n(wn),Cn=function(e){var t=e.ingredients;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h3",{className:yn.a.ingredients_title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(Q.jsx)(Ir,{height:"300px",children:Object(Q.jsx)("ul",{className:yn.a.list,children:t.map((function(e,t){return Object(Q.jsx)("li",{className:yn.a.item,children:Object(Q.jsx)(_n,{ingredient:e,price:e.price})},t)}))})})]})},Nn=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),r=t[0],s=t[1],c=X(),i=W().id,o=Y((function(e){return e.ingredients})),l=o.ingredients,d=o.isLoading,p=l&&r&&r.ingredients.map((function(e){return l.find((function(t){return t._id===e}))})),m=r&&wr(r.createdAt),j=p&&l&&yr(p);return a.a.useEffect((function(){A(i).then((function(e){s(e.orders[0])})).catch((function(e){console.log(e)}))}),[i,c]),Object(Q.jsx)(Q.Fragment,{children:!d&&r?Object(Q.jsxs)("article",{className:mn.a.card,children:[Object(Q.jsxs)("p",{className:mn.a.id,children:["#",r.number]}),Object(Q.jsx)(bn,{name:r.name,status:r.status}),Object(Q.jsx)(Cn,{ingredients:p}),Object(Q.jsx)(vn,{datetime:m,price:j})]}):Object(Q.jsx)(Ae,{})})},kn=["children"],En=function(e){var t=e.children,r=Object(en.a)(e,kn),n=Y((function(e){return e.auth})).isAuthorized,a=(Object(m.h)().state||{from:{pathname:"/"}}).from;return Object(Q.jsx)(m.b,Object(o.a)(Object(o.a)({},r),{},{render:function(){return n?Object(Q.jsx)(m.a,{to:a}):t}}))},Sn=r(130),In=r.n(Sn),Ln=function(e){var t=e.onClose,r=Y((function(e){return e.ingredients})).ingredients,n=Y((function(e){return e.order})).orderToShow,a=n,s=a.name,c=a.status,i=a.number,o=a.createdAt,u=r&&n&&n.ingredients.map((function(e){return r.find((function(t){return t._id===e}))})),l=n&&wr(o),d=u&&r&&yr(u);return Object(Q.jsx)(Ve,{name:"Details",title:"#".concat(i),onClose:t,titleType:"id",children:Object(Q.jsxs)("article",{className:In.a.card,children:[Object(Q.jsx)(bn,{name:s,status:c}),Object(Q.jsx)(Cn,{ingredients:u}),Object(Q.jsx)(vn,{datetime:l,price:d})]})})},Tn="https://norma.nomoreparties.space/api",Pn=function(){var e=X(),t=Object(m.h)(),r=Object(m.g)(),a=Y((function(e){return e.auth})).isLoading,s="PUSH"===r.action&&t.state&&t.state.pushLocation;Object(n.useEffect)((function(){e(Lt()),e(J())}),[e]);var c=Object(n.useCallback)((function(){e(st()),r.goBack(),e(Ft())}),[e,r]);return Object(Q.jsxs)(Q.Fragment,{children:[a&&Object(Q.jsx)(Ae,{type:"default"}),Object(Q.jsx)($r,{}),Object(Q.jsxs)(m.d,{location:s||t,children:[Object(Q.jsx)(m.b,{path:"/",exact:!0,children:Object(Q.jsx)(Jt,{})}),Object(Q.jsx)(m.b,{path:"/feed",exact:!0,children:Object(Q.jsx)(dn,{})}),Object(Q.jsx)(m.b,{path:"/feed/:id",exact:!0,children:Object(Q.jsx)(Nn,{})}),Object(Q.jsx)(En,{path:"/login",exact:!0,children:Object(Q.jsx)(K,{})}),Object(Q.jsx)(En,{path:"/register",exact:!0,children:Object(Q.jsx)(Gr,{})}),Object(Q.jsx)(En,{path:"/forgot-password",exact:!0,children:Object(Q.jsx)(ae,{})}),Object(Q.jsx)(rn,{path:"/reset-password",exact:!0,children:Object(Q.jsx)(Hr,{})}),Object(Q.jsx)(an,{path:"/profile",exact:!0,children:Object(Q.jsx)(mr,{})}),Object(Q.jsx)(an,{path:"/profile/orders",exact:!0,children:Object(Q.jsx)(Rr,{})}),Object(Q.jsx)(an,{path:"/profile/orders/:id",exact:!0,children:Object(Q.jsx)(Nn,{})}),Object(Q.jsx)(m.b,{path:"/ingredients/:id",exact:!0,children:Object(Q.jsx)(tr,{})}),Object(Q.jsx)(m.b,{children:Object(Q.jsx)(ar,{})})]}),s&&Object(Q.jsx)(m.b,{path:"/ingredients/:id",children:Object(Q.jsx)(Ve,{name:"Details",title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:c,children:Object(Q.jsx)(Kt,{})})}),s&&Object(Q.jsx)(m.b,{path:"/feed/:id",children:Object(Q.jsx)(Ln,{onClose:c})}),s&&Object(Q.jsx)(m.b,{path:"/profile/orders/:id",children:Object(Q.jsx)(Ln,{onClose:c})})]})},Mn={ingredients:Dt,order:tt,cart:xe,modal:ot,auth:Z,password:ne,feed:Pr,userFeed:zr},Fn={feed:function(){return new WebSocket("wss://norma.nomoreparties.space/orders/all")},userFeed:function(){return new WebSocket("wss://norma.nomoreparties.space/orders?token=".concat(_("token").split(" ")[1]))}},Dn=["success"],zn=function(){return function(e){var t=null,r="";return function(n){return function(a){var s=e.dispatch,c=a.type,i=a.payload;c===Br.connect.wsConnectionInit.toString()&&(r=i,t=Fn[i]()),c===Br.connect.wsConnectionClose.toString()&&t.close(),t&&(t.onopen=function(e){s(Br[r].onOpen(e.type))},t.onmessage=function(e){var t=e.data,n=JSON.parse(t),a=(n.success,Object(en.a)(n,Dn));a.message&&"Invalid or missed token"===a.message?k().then((function(e){O("token",e.accessToken,{path:"/"}),localStorage.setItem("token",e.refreshToken),s(Br.connect.wsConnectionInit(i))})):s(Br[r].onMessage(n))},t.onerror=function(e){s(Br[r].onError(e.type&&!0))},t.onclose=function(e){s(Br[r].onClose(e.type))}),n(a)}}}},An=Object(x.a)({reducer:Mn,middleware:function(e){return e().concat(zn())},devTools:!0});c.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(j.a,{basename:"https://4mnesiac.github.io/space-burger/",children:Object(Q.jsx)(V.a,{store:An,children:Object(Q.jsx)(Pn,{})})})}),document.getElementById("root"))},28:function(e,t,r){e.exports={wrapper:"auth_wrapper__ZtN56",form:"auth_form__1lXqw mb-20",heading:"auth_heading__2wIVj mb-6",input_container:"auth_input_container__2jFuI pl-6 pr-6 mb-6",input_control:"auth_input_control__5AchI pl-6",button:"auth_button__BOkYQ",text:"auth_text__3c9Lh text text_type_main-default mb-4",link:"auth_link__1SeCN",error:"auth_error__DEarE"}},31:function(e,t,r){e.exports={wrapper:"reset-password_wrapper__3GHrk",form:"reset-password_form__30ulD mb-20",heading:"reset-password_heading__36KvP mb-6",button:"reset-password_button__1wsdj",text:"reset-password_text__H3xJP text text_type_main-default mb-4",link:"reset-password_link__3jm6w",error:"reset-password_error__1ZxWG text text_type_main-default"}},33:function(e,t,r){e.exports={order_number:"order-details_order_number__3uQJl text text_type_digits-large mt-9 mb-8",subtitle:"order-details_subtitle__1Dv7W text text_type_main-medium",text:"order-details_text__cEOZj text text_type_main-default mb-2",text_secondary:"order-details_text_secondary__2t5J8 pb-30",icon:"order-details_icon__33Q9e mt-15 mb-15",close:"order-details_close__34J5V",name:"order-details_name__1sGdA text text_type_main-default mb-2 mt-2"}},34:function(e,t,r){e.exports={picture:"card_picture__3KLvI ml-4 mr-4",image:"card_image__3FQvp",item:"card_item__2ugTB ml-6 mb-10",price:"card_price__33wDt mt-1 mb-1 text_type_digits-medium",text:"card_text__CRb1Z text text_type_main-default",card:"card_card__VaNOE"}},35:function(e,t,r){e.exports={navbar:"navbar_navbar__3VrtK",nav_menu:"navbar_nav_menu__1AAUh",logo:"navbar_logo__wVl5E",item_wrapper:"navbar_item_wrapper__DUszW",link:"navbar_link__2UijB"}},38:function(e,t,r){e.exports={modal:"modal_modal__2TVGy",container:"modal_container__k1tel",heading:"modal_heading__YLWje text text_type_main-large pt-10 pl-10",heading_type_id:"modal_heading_type_id__ezqvY text_type_digits-default text pt-10 pl-10",close:"modal_close__3xgR4 mt-15 mr-10"}},39:function(e,t,r){e.exports={ingredient:"order-item_ingredient__iLSJ_",ingredient_name:"order-item_ingredient_name__1jm0M text_type_main-default text ml-4",price:"order-item_price__1_II6 text text_type_digits-default",picture:"order-item_picture__1hl4i"}},47:function(e,t,r){e.exports={title:"ingredient-details_title__1H6N7 text text_type_main-medium mt-4 mb-8",picture:"ingredient-details_picture__1Fave ml-4 mr-4",detail:"ingredient-details_detail__uBH5J"}},48:function(e,t,r){e.exports={wrapper:"not-found-404_wrapper__3gxr_",text:"not-found-404_text__2t-KY text text_type_main-medium mt-4",title:"not-found-404_title__1WXyk text text_type_digits-large",link:"not-found-404_link__2glP3 text text_type_main-medium"}},49:function(e,t,r){e.exports={link:"nav-item_link__3464V ml-2 mt-4 mb-4 pt-4 pb-4 pr-5 pl-5 text text_type_main-default",active:"nav-item_active__hQQRU",icon:"nav-item_icon__1dpCG mr-2"}},50:function(e,t,r){e.exports={wrapper:"feed_wrapper__23L8J",order_list:"feed_order_list__gDp30 pr-2",list_item:"feed_list_item__GhyNm mb-4",heading:"feed_heading__3SVxc",ingredient:"feed_ingredient__21BUS",others:"feed_others__3nest text_type_main-default"}},59:function(e,t,r){e.exports={overlay:"modal-overlay_overlay__zQczy",overlay_opened:"modal-overlay_overlay_opened__1nnD5"}},61:function(e,t,r){e.exports={text:"nutrition-item_text__2VBhw text text_type_main-default",nutrition_item:"nutrition-item_nutrition_item__1V9QT ml-5",value:"nutrition-item_value__3x2V2 mt-2 text text_type_digits-default"}},62:function(e,t,r){e.exports={price:"price_price__1OGSW text",default:"price_default__3ZTDJ text_type_digits-default",medium:"price_medium__3F3HZ text_type_digits-medium"}},63:function(e,t,r){e.exports={header:"order-title_header__3UJCn pb-15 pt-5",title:"order-title_title__1cTp7 text text_type_main-medium mb-3",status:"order-title_status__x0ARq text text_type_main-default"}},64:function(e,t,r){e.exports={footer:"order-footer_footer__1YpGF pt-10 pb-10",wrapper:"order-footer_wrapper__Up1Wz text",time:"order-footer_time__CG22Q text_type_main-default"}},65:function(e,t,r){e.exports={ingredients_title:"order-content_ingredients_title__UkZ2n text text_type_main-medium mb-6",list:"order-content_list__1nt3p list-reset pr-6"}},86:function(e,t,r){e.exports={container:"burger-constructor_container__382E2 ml-5 pt-25",scroller:"burger-constructor_scroller__UGxHP mb-4 mt-4"}},87:function(e,t,r){e.exports={item_container:"ingredient_item_container__1rzXZ pb-2 pt-2",list_item:"ingredient_list_item__1nMDy"}},89:function(e,t,r){e.exports={order:"order_order__2JtIh mt-10 mb-10 pl-4 pr-4",price:"order_price__3w2Hm text text_type_digits-medium mr-10"}},91:function(e,t,r){e.exports={bun:"bun_bun__2xRKp pl-8 pr-6",bun_empty:"bun_bun_empty__1DDxd pl-8 pr-6"}},92:function(e,t,r){e.exports={ingredients:"burger-ingredients_ingredients__lalje mr-5",title:"burger-ingredients_title__2Jhvr text_type_main-large mt-10 mb-5"}},93:function(e,t,r){e.exports={title:"menu-item_title__1h3RY text text_type_main-medium mb-6",items:"menu-item_items__raPFB ml-4 mr-4"}},95:function(e,t,r){e.exports={wrapper:"ingredient-page_wrapper__2d3Z_ pt-20",title:"ingredient-page_title__rLCPc text_type_main-large text"}},96:function(e,t,r){e.exports={button:"profile-form_button__3rcLY",user_info:"profile-form_user_info__FHM_t"}},97:function(e,t,r){e.exports={order_list:"order-preview_order_list__3yNXb pr-2",list_item:"order-preview_list_item__BhKX7 mb-4",link:"order-preview_link__qxicg"}},98:function(e,t,r){e.exports={scroller:"scroll-container_scroller__2lyE8 pr-2"}},99:function(e,t,r){e.exports={card:"order-info_card__nXOoS",id:"order-info_id__1c6uE text_type_digits-default text mb-10 mt-20",item:"order-info_item__zM-lt mb-4"}}},[[237,1,2]]]);
//# sourceMappingURL=main.1a7c210b.chunk.js.map